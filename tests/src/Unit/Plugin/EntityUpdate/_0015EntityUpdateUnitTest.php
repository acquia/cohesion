<?php

namespace Drupal\Tests\cohesion\Unit\Plugin\EntityUpdate;

use Drupal\cohesion\Entity\EntityJsonValuesInterface;
use Drupal\cohesion\Plugin\EntityUpdate\_0015EntityUpdate;
use Drupal\Tests\UnitTestCase;

/**
 * Class MockUpdateEntity.
 *
 * @package Drupal\Tests\cohesion\Unit
 */
class _0015MockUpdateEntity extends EntityMockBase implements EntityJsonValuesInterface {
}

/**
 * @group Cohesion
 */
class _0015EntityUpdateUnitTest extends UnitTestCase {

  /**
   * @var unit_0015MockUpdateEntity*/
  protected $unit;

  private $fixture_layout = '{"canvas":[{"type":"container","uid":"column","title":"Column","status":{"collapsed":false},"breakpointClasses":"coh-layout-col-xl-[field-e7947ab1-db62-4e57-b3ec-1eda5d7d7249] coh-layout-col-ps-[field-ff1f20ef-f2b7-4c07-a491-55af03245114] coh-layout-col-md-[field-d56a1803-c41f-4c6e-890f-9aadbbc69870] coh-layout-column-width","parentIndex":2,"uuid":"81481250-e50c-4e2d-8fcd-7e4982a9f427","parentUid":"root","isContainer":true,"children":[{"type":"container","uid":"container","title":"Container","status":{"collapsed":false},"parentIndex":1,"uuid":"f83153f3-c4d3-4551-8268-d8c3d29fd99a","parentUid":"column","isContainer":true,"children":[{"type":"item","uid":"image","title":"Image","status":{"collapsed":true},"parentIndex":2,"uuid":"71f1c2d3-b4aa-414a-8995-2853632f7a46","parentUid":"container","isContainer":false,"children":[]},{"type":"container","uid":"container","title":"Container","status":{"collapsed":false},"parentIndex":2,"parentUid":"container","uuid":"7a06e0dd-09b8-42c2-aabe-b1438923b631","isContainer":true,"children":[{"type":"container","uid":"heading","title":"Heading","status":{"collapsed":true},"parentIndex":1,"uuid":"0f40fc7f-90d0-404b-8a08-44d0d097fc1b","parentUid":"container","isContainer":true,"children":[]},{"type":"container","uid":"heading","title":"Heading","status":{"collapsed":true},"parentIndex":0,"uuid":"ff76fed0-7581-4d0e-aaa7-8b8e95aafc47","parentUid":"container","isContainer":true,"children":[]}]}]}]}],"componentForm":[{"type":"form-container","uid":"form-tab-container","title":"Tab container","parentIndex":"form-layout","status":{"collapsed":false},"options":{"formBuilder":true},"parentUid":"root","uuid":"16e68060-fea9-4f38-8b7c-e5890208d29d","isContainer":true,"children":[{"type":"form-container","uid":"form-tab-item","title":"Tab item","parentIndex":"form-layout","status":{"collapsed":false},"options":{"formBuilder":true},"parentUid":"form-tab-container","uuid":"fe5236d4-c07f-4739-9122-1538985757b5","isContainer":true,"children":[{"type":"form-container","uid":"form-accordion","title":"Group accordion","parentIndex":"form-layout","status":{"collapsed":false},"options":{"formBuilder":true},"parentUid":"form-tab-item","uuid":"15e39b6a-a4e9-46e0-9af3-77eebc447701","isContainer":true,"children":[{"type":"form-container","uid":"form-section","title":"Field group","parentIndex":"form-layout","status":{"collapsed":true},"options":{"formBuilder":true},"parentUid":"form-accordion","uuid":"f1fdafb6-ae87-4801-a8d5-392dc1d6e95a","isContainer":true,"children":[{"type":"form-container","uid":"form-section","title":"Field group","parentIndex":"form-layout","status":{"collapsed":false},"options":{"formBuilder":true},"uuid":"e2435c21-a5d0-499a-8d2e-2826060d4ea2","parentUid":"form-section","isContainer":true,"children":[{"type":"form-field","uid":"form-image","title":"Image uploader","parentIndex":"form-fields","status":{"collapsed":false},"parentUid":"form-section","uuid":"5ecad84c-1903-402f-9d1b-a8c5b8d8a098","humanId":"Field 1","isContainer":false,"children":[]}]},{"type":"form-container","uid":"form-section","title":"Field group","parentIndex":"form-layout","status":{"collapsed":false},"options":{"formBuilder":true},"uuid":"51339497-9830-49f8-8190-f8573780e792","parentUid":"form-section","isContainer":true,"children":[{"type":"form-field","uid":"form-input","title":"Input","parentIndex":"form-fields","status":{"collapsed":false},"uuid":"e35ae154-1e7b-41cb-babb-9209c78c1ea2","parentUid":"form-section","humanId":"Field 2","isContainer":false,"children":[]},{"type":"form-field","uid":"form-input","title":"Input","parentIndex":"form-fields","status":{"collapsed":false},"uuid":"58c369ea-4a48-4ee4-aca4-9072ce0af7c5","parentUid":"form-section","humanId":"Field 3","isContainer":false,"children":[]}]}]}]},{"type":"form-container","uid":"form-accordion","title":"Group accordion","parentIndex":"form-layout","status":{"collapsed":false},"options":{"formBuilder":true},"uuid":"7c5ed76f-c157-4a69-b881-e82c05b69383","parentUid":"form-tab-item","isContainer":true,"children":[{"type":"form-container","uid":"form-section","title":"Field group","parentIndex":"form-layout","status":{"collapsed":true},"options":{"formBuilder":true},"parentUid":"form-accordion","uuid":"f7562239-f930-40f4-9744-2a4f349822c3","isContainer":true,"children":[{"type":"form-field","uid":"form-input","title":"Input","parentIndex":"form-fields","status":{"collapsed":false},"uuid":"f758f4c9-9588-4610-87f4-4f02423c0120","parentUid":"form-section","humanId":"Field 4","isContainer":false,"children":[]},{"type":"form-field","uid":"form-input","title":"Input","parentIndex":"form-fields","status":{"collapsed":false},"uuid":"03322899-56e0-401a-8ab7-730c5b569f6f","parentUid":"form-section","humanId":"Field 5","isContainer":false,"children":[]}]},{"type":"form-container","uid":"form-section","title":"Field group","parentIndex":"form-layout","status":{"collapsed":true},"options":{"formBuilder":true},"uuid":"9320bda8-a573-4717-b0bb-30e97ddcae06","parentUid":"form-accordion","isContainer":true,"children":[{"type":"form-field","uid":"form-link","title":"Link","parentIndex":"form-fields","status":{"collapsed":false},"uuid":"78bb4f3d-45b5-4fc6-9167-3d9ed0fa029f","parentUid":"form-section","humanId":"Field 6","isContainer":false,"children":[]}]}]}]},{"type":"form-container","uid":"form-tab-item","title":"Tab item","parentIndex":"form-layout","status":{"collapsed":false},"options":{"formBuilder":true},"parentUid":"form-tab-container","uuid":"b5bf66b6-1a2a-41cf-a16c-a42b408f66cd","isContainer":true,"children":[{"type":"form-container","uid":"form-section","title":"Field group","parentIndex":"form-layout","status":{"collapsed":true},"options":{"formBuilder":true},"uuid":"03d272fa-ca6d-4323-963a-e0d479328e71","parentUid":"form-tab-item","isContainer":true,"children":[{"type":"form-field","uid":"form-select","title":"Select","parentIndex":"form-fields","status":{"collapsed":false},"uuid":"e7947ab1-db62-4e57-b3ec-1eda5d7d7249","parentUid":"form-section","humanId":"Field 7","isContainer":false,"children":[]},{"type":"form-field","uid":"form-select","title":"Select","parentIndex":"form-fields","status":{"collapsed":false},"uuid":"d56a1803-c41f-4c6e-890f-9aadbbc69870","parentUid":"form-section","humanId":"Field 8","isContainer":false,"children":[]},{"type":"form-field","uid":"form-select","title":"Select","parentIndex":"form-fields","status":{"collapsed":false},"uuid":"ff1f20ef-f2b7-4c07-a491-55af03245114","parentUid":"form-section","humanId":"Field 9","isContainer":false,"children":[]}]},{"type":"form-container","uid":"form-section","title":"Field group","parentIndex":"form-layout","status":{"collapsed":true},"options":{"formBuilder":true},"uuid":"4523cf0e-e795-4fa4-9e25-34b133777bc1","parentUid":"form-tab-item","isContainer":true,"children":[{"type":"form-field","uid":"form-select","title":"Select","parentIndex":"form-fields","status":{"collapsed":false},"uuid":"daabd3ea-ef42-4be9-a492-9433da0df78e","parentUid":"form-section","humanId":"Field 10","isContainer":false,"children":[]}]}]},{"type":"form-container","uid":"form-tab-item","title":"Tab item","parentIndex":"form-layout","status":{"collapsed":false},"options":{"formBuilder":true},"parentUid":"form-tab-container","uuid":"f487e44e-762c-4d09-8dcf-b2523388667c","isContainer":true,"children":[{"type":"form-help","uid":"form-helptext","title":"Help text","parentIndex":"form-help","status":{"collapsed":false},"uuid":"c7a1cda5-f4a0-4d10-b521-912fa594121f","parentUid":"form-tab-item","isContainer":false,"children":[]}]}]}],"model":{"81481250-e50c-4e2d-8fcd-7e4982a9f427":{"settings":{"styles":{"xl":{"col":"[field.e7947ab1-db62-4e57-b3ec-1eda5d7d7249]"},"lg":{},"sm":{},"ps":{"col":"[field.ff1f20ef-f2b7-4c07-a491-55af03245114]"},"md":{"col":"[field.d56a1803-c41f-4c6e-890f-9aadbbc69870]"}},"customStyle":[{"customStyle":""}]},"context-visibility":{"contextVisibility":{"condition":"ALL"}},"styles":{"settings":{"element":"column"},"styles":{"xl":{"flex-item":{"flex-basis":{},"order":{},"flex-grow":{},"flex-shrink":{},"align-self":{}}},"lg":{"flex-item":{"flex-basis":{},"order":{},"flex-grow":{},"flex-shrink":{},"align-self":{}}},"sm":{"flex-item":{"flex-basis":{},"order":{},"flex-grow":{},"flex-shrink":{},"align-self":{}}},"ps":{"flex-item":{"flex-basis":{},"order":{},"flex-grow":{},"flex-shrink":{},"align-self":{}}}}},"isVariableMode":false},"f83153f3-c4d3-4551-8268-d8c3d29fd99a":{"settings":{"width":"fluid","customStyle":[{"customStyle":"[field.daabd3ea-ef42-4be9-a492-9433da0df78e]"}],"title":"Container - Link","titleAttribute":"","type":"internal-page","target":"_self","linkToPage":"[field.78bb4f3d-45b5-4fc6-9167-3d9ed0fa029f]"},"context-visibility":{"contextVisibility":{"condition":"ALL"}},"styles":{"settings":{"element":"container"},"styles":{"xl":{"background-color":{},"font-size":{},"line-height":{},"text-align":{},"letter-spacing":{},"word-spacing":{},"text-indent":{},"min-height":{},"max-height":{},"height":{},"display":{},"visibility":{},"overflow":{"value":"hidden"},"overflow-x":{},"overflow-y":{},"flex-container":{"flex-direction":{},"flex-wrap":{},"justify-content":{},"align-content":{},"align-items":{}},"border-color":{},"border-top-color":{},"border-bottom-color":{},"border-left-color":{},"border-right-color":{},"position":{"value":"relative"},"top":{},"bottom":{},"left":{},"right":{},"z-index":{"value":"2"}}},"modifiers":[],"pseudos":[{"settings":{"element":"","class":"","combinator":"","pseudo":":before"},"styles":{"xl":{"min-height":{},"max-height":{},"height":{"value":"100%"},"min-width":{},"max-width":{},"width":{"value":"100%"},"position":{"value":"absolute"},"top":{"value":"0"},"bottom":{"value":""},"left":{"value":"0"},"right":{"value":""},"z-index":{"value":"2"},"background-color":{"value":{"value":{"hex":"#000000","rgba":"rgba(0, 0, 0, 1)"},"name":"Black","uid":"black","class":".coh-color-black","variable":"$coh-color-black","wysiwyg":true,"inuse":false}},"opacity":{"value":0.2},"display":{"value":"block"},"visibility":{},"overflow":{},"overflow-x":{},"overflow-y":{},"transitions":[{"transitionProperty":{"value":"all"},"transitionDuration":{"value":300},"transitionTimingFunction":{"value":"ease"},"transitionDelay":{}}]}},"children":[],"pseudos":[],"modifiers":[],"prefix":[]},{"settings":{"element":"","class":"","combinator":"","pseudo":":hover"},"styles":{},"children":[{"settings":{"element":".card-image","class":"","combinator":"","pseudo":""},"styles":{"xl":{"transform":{"transformRotateX":{},"transformRotateY":{},"transformRotateZ":{},"transformTranslateX":{},"transformTranslateY":{},"transformScaleX":{"value":1},"transformScaleY":{"value":1},"transformSkewX":{},"transformSkewY":{},"transformOriginX":{},"transformOriginY":{}}}},"children":[],"pseudos":[],"modifiers":[],"prefix":[]},{"settings":{"element":".card-pre-heading","class":"","combinator":"","pseudo":""},"styles":{"xl":{"font-family":{},"font-weight":{},"color":{"value":{"name":"Color 1","uid":"color-1","value":{"hex":"#28a9e0","rgba":"rgba(40, 169, 224, 1)"},"wysiwyg":true,"class":".coh-color-color-1","variable":"$coh-color-color-1","inuse":true}}}},"children":[],"pseudos":[],"modifiers":[],"prefix":[]},{"settings":{"element":".card-heading","class":"","combinator":"","pseudo":""},"styles":{"xl":{"font-family":{},"font-weight":{},"color":{"value":{"value":{"hex":"#28a9e0","rgba":"rgba(40, 169, 224, 1)"},"name":"Color 1","uid":"color-1","class":".coh-color-color-1","variable":"$coh-color-color-1","wysiwyg":true,"inuse":true}}}},"children":[],"pseudos":[],"modifiers":[],"prefix":[]}],"pseudos":[{"settings":{"element":"","class":"","combinator":"","pseudo":":before"},"styles":{"xl":{"opacity":{"value":0.6}}},"children":[],"pseudos":[],"modifiers":[],"prefix":[]}],"modifiers":[],"prefix":[]}],"children":[{"settings":{"element":".card-image","class":"","combinator":"","pseudo":""},"styles":{"xl":{"transform":{"transformRotateX":{},"transformRotateY":{},"transformRotateZ":{},"transformTranslateX":{},"transformTranslateY":{},"transformScaleX":{"value":1.3},"transformScaleY":{"value":1.3},"transformSkewX":{},"transformSkewY":{},"transformOriginX":{},"transformOriginY":{}},"transitions":[{"transitionProperty":{"value":"custom"},"transitionDuration":{"value":300},"transitionTimingFunction":{"value":"ease"},"transitionDelay":{},"transitionCustomProperty":{"value":"transform"}}]}},"children":[],"pseudos":[],"modifiers":[],"prefix":[]},{"settings":{"element":".card-pre-heading","class":"","combinator":"","pseudo":""},"styles":{"xl":{"font-family":{},"font-weight":{},"color":{"value":{"value":{"hex":"#e6e8ee","rgba":"rgba(230, 232, 238, 1)"},"name":"Light 2","uid":"light-2","class":".coh-color-light-2","variable":"$coh-color-light-2","wysiwyg":true,"inuse":true}},"transitions":[{"transitionProperty":{"value":"color"},"transitionDuration":{"value":300},"transitionTimingFunction":{"value":"ease"},"transitionDelay":{}}]}},"children":[],"pseudos":[],"modifiers":[],"prefix":[]},{"settings":{"element":".card-heading","class":"","combinator":"","pseudo":""},"styles":{"xl":{"font-family":{},"font-weight":{},"color":{"value":{"name":"White","uid":"white","value":{"hex":"#ffffff","rgba":"rgba(255, 255, 255, 1)"},"wysiwyg":true,"class":".coh-color-white","variable":"$coh-color-white","inuse":true}},"transitions":[{"transitionProperty":{"value":"color"},"transitionDuration":{"value":300},"transitionTimingFunction":{"value":"ease"},"transitionDelay":{}}]}},"children":[],"pseudos":[],"modifiers":[],"prefix":[]}],"prefix":[]},"isVariableMode":false,"markup":{"classes":""},"hideNoData":{}},"71f1c2d3-b4aa-414a-8995-2853632f7a46":{"settings":{"styles":{"xl":{"displaySize":"coh-image-responsive","imageAlignment":null}},"image":"[field.5ecad84c-1903-402f-9d1b-a8c5b8d8a098]","attributes":{"title":"[field.e35ae154-1e7b-41cb-babb-9209c78c1ea2]","alt":"[field.58c369ea-4a48-4ee4-aca4-9072ce0af7c5]"},"imageStyle":"","customStyle":[{"customStyle":""}]},"context-visibility":{"contextVisibility":{"condition":"ALL"}},"styles":{"settings":{"element":"img"},"styles":{"xl":{"min-width":{},"max-width":{},"width":{},"margin":{"margin-top":{},"margin-bottom":{},"margin-left":{},"margin-right":{}},"position":{"value":"relative"},"top":{},"bottom":{},"left":{},"right":{},"z-index":{"value":"1"}},"ps":{"max-width":{}},"md":{"max-width":{}}},"modifiers":[]},"isVariableMode":false,"markup":{"classes":"card-image"},"hideNoData":{"hideEnable":true,"hideData":"[field.5ecad84c-1903-402f-9d1b-a8c5b8d8a098]"}},"7a06e0dd-09b8-42c2-aabe-b1438923b631":{"settings":{"width":"fluid","customStyle":[{"customStyle":"coh-style-padding---small"}]},"context-visibility":{"contextVisibility":{"condition":"ALL"}},"styles":{"settings":{"element":"container"},"styles":{"xl":{"position":{"value":"absolute"},"top":{},"bottom":{"value":"0"},"left":{"value":"0"},"right":{},"z-index":{"value":"3"}}}},"isVariableMode":false},"0f40fc7f-90d0-404b-8a08-44d0d097fc1b":{"settings":{"element":"h2","customStyle":[{"customStyle":"coh-style-pre-heading"}],"title":"Pre heading","content":"[field.f758f4c9-9588-4610-87f4-4f02423c0120]"},"context-visibility":{"contextVisibility":{"condition":"ALL"}},"styles":{"settings":{"element":"heading"}},"isVariableMode":false,"markup":{"classes":"card-pre-heading"}},"ff76fed0-7581-4d0e-aaa7-8b8e95aafc47":{"settings":{"element":"h3","content":"[field.03322899-56e0-401a-8ab7-730c5b569f6f]","customStyle":[{"customStyle":""}]},"context-visibility":{"contextVisibility":{"condition":"ALL"}},"styles":{"settings":{"element":"heading"},"styles":{"xl":{"font-family":{},"font-weight":{},"color":{}}}},"isVariableMode":false,"hideNoData":{"hideEnable":true,"hideData":"[field.03322899-56e0-401a-8ab7-730c5b569f6f]"},"markup":{"classes":"card-heading"}},"16e68060-fea9-4f38-8b7c-e5890208d29d":{"settings":{"type":"cohTabContainer","title":"Tab container"}},"fe5236d4-c07f-4739-9122-1538985757b5":{"settings":{"type":"cohTabItem","title":"Content"},"contextVisibility":{"condition":"ALL"}},"15e39b6a-a4e9-46e0-9af3-77eebc447701":{"settings":{"type":"cohAccordion","title":"Image content","htmlClass":"coh-accordion-dark","isOpen":true},"contextVisibility":{"condition":"ALL"}},"f1fdafb6-ae87-4801-a8d5-392dc1d6e95a":{"settings":{"type":"cohSection","title":"Image","hideRowHeading":0,"columnCount":"coh-component-field-group-1-col","breakpoints":false,"propertiesMenu":false,"disableScrollbar":true,"disableEllipsisMenu":true,"isOpen":true},"contextVisibility":{"condition":"ALL"}},"e2435c21-a5d0-499a-8d2e-2826060d4ea2":{"settings":{"type":"cohSection","title":"Field group","hideRowHeading":1,"columnCount":"coh-component-field-group-1-col","breakpoints":false,"propertiesMenu":false,"disableScrollbar":true,"disableEllipsisMenu":true,"isOpen":true},"contextVisibility":{"condition":"ALL"}},"5ecad84c-1903-402f-9d1b-a8c5b8d8a098":{"settings":{"type":"cohFileBrowser","options":{"buttonText":"Select image","imageUploader":false,"allowedDescription":"Allowed: png, gif, jpg, jpeg","removeLabel":"Remove"},"title":"Image","isStyle":true,"defaultActive":true,"schema":{"type":"string","required":true},"validationMessage":{"302":"Please provide an image."}},"contextVisibility":{"condition":"ALL"},"model":{"value":"[media-reference:file:58abfcde-c65e-4974-a445-65ceaa6def7b]"}},"51339497-9830-49f8-8190-f8573780e792":{"settings":{"type":"cohSection","title":"Field group","hideRowHeading":1,"columnCount":"coh-component-field-group-2-col","breakpoints":false,"propertiesMenu":false,"disableScrollbar":true,"disableEllipsisMenu":true,"isOpen":true},"contextVisibility":{"condition":"ALL"}},"e35ae154-1e7b-41cb-babb-9209c78c1ea2":{"settings":{"title":"Title","schema":{"type":"string","escape":true}},"contextVisibility":{"condition":"ALL"}},"58c369ea-4a48-4ee4-aca4-9072ce0af7c5":{"settings":{"title":"Alt tag","schema":{"type":"string","escape":true,"required":false},"validationMessage":{"302":""}},"contextVisibility":{"condition":"ALL"},"model":{"value":"Placeholder"}},"7c5ed76f-c157-4a69-b881-e82c05b69383":{"settings":{"type":"cohAccordion","title":"Text content","htmlClass":"coh-accordion-dark","isOpen":true},"contextVisibility":{"condition":"ALL"}},"f7562239-f930-40f4-9744-2a4f349822c3":{"settings":{"type":"cohSection","title":"Heading","hideRowHeading":0,"columnCount":"coh-component-field-group-1-col","breakpoints":false,"propertiesMenu":false,"disableScrollbar":true,"disableEllipsisMenu":true,"isOpen":true},"contextVisibility":{"condition":"ALL"}},"f758f4c9-9588-4610-87f4-4f02423c0120":{"settings":{"title":"Pre heading","schema":{"type":"string","escape":true}},"contextVisibility":{"condition":"ALL"},"model":{"value":"Pre heading"}},"03322899-56e0-401a-8ab7-730c5b569f6f":{"settings":{"title":"Heading","schema":{"type":"string","escape":true,"required":false},"validationMessage":{"302":""}},"contextVisibility":{"condition":"ALL"},"model":{"value":"Short headline"}},"9320bda8-a573-4717-b0bb-30e97ddcae06":{"settings":{"type":"cohSection","title":"Link","hideRowHeading":0,"columnCount":"coh-component-field-group-1-col","breakpoints":false,"propertiesMenu":false,"disableScrollbar":true,"disableEllipsisMenu":true,"isOpen":true},"contextVisibility":{"condition":"ALL"}},"78bb4f3d-45b5-4fc6-9167-3d9ed0fa029f":{"settings":{"isStyle":true,"type":"cohTypeahead","key":"linkToPage","title":"Link to page","placeholder":"Type page name","labelProperty":"name","valueProperty":"id","typeaheadEditable":true,"endpoint":"\/cohesionapi\/autocomplete\/node\/default:node?q=","schema":{"type":"string","required":true},"validationMessage":{"302":"Please provide a link."}},"contextVisibility":{"condition":"ALL"},"model":{"value":"www.cohesiondx.com"}},"b5bf66b6-1a2a-41cf-a16c-a42b408f66cd":{"settings":{"type":"cohTabItem","title":"Layout and style"},"contextVisibility":{"condition":"ALL"}},"03d272fa-ca6d-4323-963a-e0d479328e71":{"settings":{"type":"cohSection","title":"Card width","hideRowHeading":0,"columnCount":"coh-component-field-group-3-col","breakpoints":false,"propertiesMenu":false,"disableScrollbar":true,"disableEllipsisMenu":true,"isOpen":true},"contextVisibility":{"condition":"ALL"}},"e7947ab1-db62-4e57-b3ec-1eda5d7d7249":{"settings":{"type":"cohSelect","title":"Desktop","selectType":"custom","schema":{"type":"string"},"options":[{"label":"Hide column","value":"-1"},{"label":"Auto fit","value":"-2"},{"label":"Full width","value":"12"},{"label":"3\/4 width","value":"9"},{"label":"2\/3 width","value":"8"},{"label":"1\/2 width","value":"6"},{"label":"1\/3 width","value":"4"},{"label":"1\/4 width","value":"3"}]},"contextVisibility":{"condition":"ALL"},"model":{"value":"6"}},"d56a1803-c41f-4c6e-890f-9aadbbc69870":{"settings":{"type":"cohSelect","title":"Tablet","selectType":"custom","schema":{"type":"string"},"options":[{"label":"Hide column","value":"-1"},{"label":"Auto fit","value":"-2"},{"label":"Full width","value":"12"},{"label":"3\/4 width","value":"9"},{"label":"2\/3 width","value":"8"},{"label":"1\/2 width","value":"6"},{"label":"1\/3 width","value":"4"},{"label":"1\/4 width","value":"3"}]},"contextVisibility":{"condition":"ALL"},"model":{"value":"6"}},"ff1f20ef-f2b7-4c07-a491-55af03245114":{"settings":{"type":"cohSelect","title":"Phone","selectType":"custom","schema":{"type":"string"},"options":[{"label":"Hide column","value":"-1"},{"label":"Auto fit","value":"-2"},{"label":"Full width","value":"12"},{"label":"3\/4 width","value":"9"},{"label":"2\/3 width","value":"8"},{"label":"1\/2 width","value":"6"},{"label":"1\/3 width","value":"4"},{"label":"1\/4 width","value":"3"}]},"contextVisibility":{"condition":"ALL"},"model":{"value":"6"}},"4523cf0e-e795-4fa4-9e25-34b133777bc1":{"settings":{"type":"cohSection","title":"Margin","hideRowHeading":0,"columnCount":"coh-component-field-group-col","breakpoints":false,"propertiesMenu":false,"disableScrollbar":true,"disableEllipsisMenu":true,"isOpen":true},"contextVisibility":{"condition":"ALL"}},"daabd3ea-ef42-4be9-a492-9433da0df78e":{"settings":{"type":"cohSelect","title":"Margin below card","selectType":"custom","schema":{"type":"string"},"options":[{"label":"None","value":""},{"label":"Apply margin below card","value":"coh-style-margin-bottom---small"}]},"contextVisibility":{"condition":"ALL"},"model":{"value":"coh-style-margin-bottom---small"}},"f487e44e-762c-4d09-8dcf-b2523388667c":{"settings":{"type":"cohTabItem","title":"Help"},"contextVisibility":{"condition":"ALL"}},"c7a1cda5-f4a0-4d10-b521-912fa594121f":{"settings":{"type":"cohHelpText","title":"Help text"},"contextVisibility":{"condition":"ALL"},"model":{"value":"You can only drop this component into \'\'Card container\'\' components.\n\nYou can set the width this card is displayed on a Desktop, Table and Phone within the \'\'Layout and style\'\' tab above."}}},"mapper":{"81481250-e50c-4e2d-8fcd-7e4982a9f427":{"settings":{"topLevel":{"formDefinition":[{"formKey":"column-settings","children":[{"formKey":"column-width-and-position","breakpoints":[{"name":"xl"},{"name":"md"},{"name":"ps"}],"activeFields":[{"name":"col","active":true},{"name":"pull","active":false},{"name":"push","active":false},{"name":"offset","active":false}]},{"formKey":"common-link-animation","breakpoints":[{"name":"xl"}],"activeFields":[{"name":"linkAnimation","active":true},{"name":"animationType","active":true},{"name":"animationScope","active":true},{"name":"animationParent","active":true},{"name":"animationTarget","active":true},{"name":"animationScale","active":true},{"name":"animationDirection","active":true},{"name":"animationDirection","active":true},{"name":"animationDirection","active":true},{"name":"animationDistance","active":true},{"name":"animationPieces","active":true},{"name":"animationOrigin","active":true},{"name":"animationFoldHeight","active":true},{"name":"animationHorizontalFirst","active":true},{"name":"animationIterations","active":true},{"name":"animationEasing","active":true},{"name":"animationDuration","active":true}]},{"formKey":"column-style","breakpoints":[],"activeFields":[{"name":"customStyle","active":true},{"name":"customStyle","active":true}]},{"formKey":"common-link-modifier","breakpoints":[],"activeFields":[{"name":"modifierType","active":true}]}]}],"items":[],"title":"Settings","selectorType":"topLevel","form":null},"dropzone":[],"selectorType":"topLevel"},"styles":{"topLevel":{"selectorType":"topLevel","formDefinition":[],"form":null},"dropzone":[],"selectorType":"topLevel"}},"f83153f3-c4d3-4551-8268-d8c3d29fd99a":{"settings":{"topLevel":{"formDefinition":[{"formKey":"container-settings","children":[{"formKey":"container-width","breakpoints":[],"activeFields":[{"name":"width","active":true}]},{"formKey":"common-link-animation","breakpoints":[{"name":"xl"}],"activeFields":[{"name":"linkAnimation","active":true},{"name":"animationType","active":true},{"name":"animationScope","active":true},{"name":"animationParent","active":true},{"name":"animationTarget","active":true},{"name":"animationScale","active":true},{"name":"animationDirection","active":true},{"name":"animationDirection","active":true},{"name":"animationDirection","active":true},{"name":"animationDistance","active":true},{"name":"animationPieces","active":true},{"name":"animationOrigin","active":true},{"name":"animationFoldHeight","active":true},{"name":"animationHorizontalFirst","active":true},{"name":"animationIterations","active":true},{"name":"animationEasing","active":true},{"name":"animationDuration","active":true}]},{"formKey":"container-style","breakpoints":[],"activeFields":[{"name":"customStyle","active":true},{"name":"customStyle","active":true}]},{"formKey":"common-link","breakpoints":[],"activeFields":[{"name":"titleAttribute","active":true},{"name":"type","active":true},{"name":"linkToPage","active":true},{"name":"url","active":true},{"name":"anchor","active":true},{"name":"scrollToSelector","active":true},{"name":"scrollToDuration","active":true},{"name":"scrollToOffsetType","active":true},{"name":"scrollToOffsetPx","active":true},{"name":"scrollToOffsetElement","active":true},{"name":"target","active":true},{"name":"modifier","active":true},{"name":"interactionScope","active":true},{"name":"interactionParent","active":true},{"name":"interactionTarget","active":true},{"name":"modifierType","active":true},{"name":"modifierName","active":true}]},{"formKey":"common-link-modifier","breakpoints":[],"activeFields":[{"name":"modifierType","active":true}]}]}],"selectorType":"topLevel","form":null},"dropzone":[],"selectorType":"topLevel"},"styles":{"topLevel":{"formDefinition":[{"formKey":"layout","children":[{"formKey":"display","breakpoints":[{"name":"xl"}],"activeFields":[{"name":"display","active":false},{"name":"visibility","active":false},{"name":"overflow","active":true},{"name":"overflow-x","active":false},{"name":"overflow-y","active":false}]},{"formKey":"position","breakpoints":[{"name":"xl"}],"activeFields":[{"name":"position","active":true},{"name":"top","active":true},{"name":"bottom","active":true},{"name":"left","active":true},{"name":"right","active":true},{"name":"z-index","active":true}]}]}],"selectorType":"topLevel","form":null},"dropzone":[{"title":":before","type":"container","items":[],"form":null,"selectorType":"pseudo","oldModelKey":["pseudos",0],"prevKey":["pseudos",0],"allowedTypes":["child","pseudo"],"formDefinition":[{"formKey":"layout","children":[{"formKey":"position","breakpoints":[{"name":"xl"}],"activeFields":[{"name":"position","active":true},{"name":"top","active":true},{"name":"bottom","active":true},{"name":"left","active":true},{"name":"right","active":true},{"name":"z-index","active":true}]},{"formKey":"height","breakpoints":[{"name":"xl"}],"activeFields":[{"name":"min-height","active":false},{"name":"max-height","active":false},{"name":"height","active":true}]},{"formKey":"width","breakpoints":[{"name":"xl"}],"activeFields":[{"name":"min-width","active":false},{"name":"max-width","active":false},{"name":"width","active":true}]},{"formKey":"opacity","breakpoints":[{"name":"xl"}],"activeFields":[{"name":"opacity","active":true}]},{"formKey":"display","breakpoints":[{"name":"xl"}],"activeFields":[{"name":"display","active":true},{"name":"visibility","active":true},{"name":"overflow","active":true},{"name":"overflow-x","active":true},{"name":"overflow-y","active":true}]}]},{"formKey":"background","children":[{"formKey":"background-color","breakpoints":[{"name":"xl"}],"activeFields":[{"name":"background-color","active":true}]}]},{"formKey":"transform-and-transition","children":[{"formKey":"transition","breakpoints":[{"name":"xl"}],"activeFields":[{"name":"transitions","active":true},{"name":"transitionProperty","active":true},{"name":"transitionCustomProperty","active":true},{"name":"transitionDuration","active":true},{"name":"transitionTimingFunction","active":true},{"name":"transitionDelay","active":true}]}]}]},{"title":".card-image","type":"container","items":[],"form":null,"selectorType":"child","model":".card-image","originalLabel":"Child selector","oldModelKey":["children",0],"prevKey":["children",0],"allowedTypes":["child","pseudo","modifier"],"formDefinition":[{"formKey":"transform-and-transition","children":[{"formKey":"transform","breakpoints":[{"name":"xl"}],"activeFields":[{"name":"transformRotateX","active":true},{"name":"transformRotateY","active":true},{"name":"transformRotateZ","active":true},{"name":"transformTranslateX","active":true},{"name":"transformTranslateY","active":true},{"name":"transformScaleX","active":true},{"name":"transformScaleY","active":true},{"name":"transformSkewX","active":true},{"name":"transformSkewY","active":true},{"name":"transformOriginX","active":true},{"name":"transformOriginY","active":true}]},{"formKey":"transition","breakpoints":[{"name":"xl"}],"activeFields":[{"name":"transitions","active":true},{"name":"transitionProperty","active":true},{"name":"transitionCustomProperty","active":true},{"name":"transitionDuration","active":true},{"name":"transitionTimingFunction","active":true},{"name":"transitionDelay","active":true}]}]}]},{"title":".card-pre-heading","type":"container","items":[],"form":null,"selectorType":"child","model":".card-pre-heading","originalLabel":"Child selector","oldModelKey":["children",1],"prevKey":["children",1],"allowedTypes":["child","pseudo","modifier"],"formDefinition":[{"formKey":"font","children":[{"formKey":"font-and-color","breakpoints":[{"name":"xl"}],"activeFields":[{"name":"font-family","active":false},{"name":"font-weight","active":false},{"name":"color","active":true}]}]},{"formKey":"transform-and-transition","children":[{"formKey":"transition","breakpoints":[{"name":"xl"}],"activeFields":[{"name":"transitions","active":true},{"name":"transitionProperty","active":true},{"name":"transitionCustomProperty","active":true},{"name":"transitionDuration","active":true},{"name":"transitionTimingFunction","active":true},{"name":"transitionDelay","active":true}]}]}]},{"title":".card-heading","type":"container","items":[],"form":null,"selectorType":"child","model":".card-heading","originalLabel":"Child selector","oldModelKey":["children",2],"prevKey":["children",2],"allowedTypes":["child","pseudo","modifier"],"formDefinition":[{"formKey":"font","children":[{"formKey":"font-and-color","breakpoints":[{"name":"xl"}],"activeFields":[{"name":"font-family","active":false},{"name":"font-weight","active":false},{"name":"color","active":true}]}]},{"formKey":"transform-and-transition","children":[{"formKey":"transition","breakpoints":[{"name":"xl"}],"activeFields":[{"name":"transitions","active":true},{"name":"transitionProperty","active":true},{"name":"transitionCustomProperty","active":true},{"name":"transitionDuration","active":true},{"name":"transitionTimingFunction","active":true},{"name":"transitionDelay","active":false}]}]}]},{"title":":hover","type":"container","items":[{"title":":before","type":"container","items":[],"form":null,"selectorType":"pseudo","prevKey":["pseudos",1,"pseudos",0],"allowedTypes":["child","pseudo"],"formDefinition":[{"formKey":"layout","children":[{"formKey":"opacity","breakpoints":[{"name":"xl"}],"activeFields":[{"name":"opacity","active":true}]}]}],"oldModelKey":["pseudos",1,"pseudos",0]},{"title":".card-image","type":"container","items":[],"form":null,"selectorType":"child","model":".card-image","originalLabel":"Child selector","oldModelKey":["pseudos",1,"children",0],"prevKey":["pseudos",1,"children",0],"allowedTypes":["child","pseudo","modifier"],"formDefinition":[{"formKey":"transform-and-transition","children":[{"formKey":"transform","breakpoints":[{"name":"xl"}],"activeFields":[{"name":"transformRotateX","active":true},{"name":"transformRotateY","active":true},{"name":"transformRotateZ","active":true},{"name":"transformTranslateX","active":true},{"name":"transformTranslateY","active":true},{"name":"transformScaleX","active":true},{"name":"transformScaleY","active":true},{"name":"transformSkewX","active":true},{"name":"transformSkewY","active":true},{"name":"transformOriginX","active":true},{"name":"transformOriginY","active":true}]}]}]},{"title":".card-pre-heading","type":"container","items":[],"form":null,"selectorType":"child","model":".card-pre-heading","originalLabel":"Child selector","oldModelKey":["pseudos",1,"children",1],"prevKey":["pseudos",1,"children",1],"allowedTypes":["child","pseudo","modifier"],"formDefinition":[{"formKey":"font","children":[{"formKey":"font-and-color","breakpoints":[{"name":"xl"}],"activeFields":[{"name":"font-family","active":false},{"name":"font-weight","active":false},{"name":"color","active":true}]}]}]},{"title":".card-heading","type":"container","items":[],"form":null,"selectorType":"child","model":".card-heading","originalLabel":"Child selector","oldModelKey":["pseudos",1,"children",2],"prevKey":["pseudos",1,"children",2],"allowedTypes":["child","pseudo","modifier"],"formDefinition":[{"formKey":"font","children":[{"formKey":"font-and-color","breakpoints":[{"name":"xl"}],"activeFields":[{"name":"font-family","active":false},{"name":"font-weight","active":false},{"name":"color","active":true}]}]}]}],"form":null,"selectorType":"pseudo","oldModelKey":["pseudos",1],"prevKey":["pseudos",1],"allowedTypes":["child","pseudo"],"formDefinition":[]}]},"markup":{"topLevel":{"formDefinition":[{"formKey":"tab-markup-classes-and-ids","children":[{"formKey":"tab-markup-add-classes","breakpoints":[],"activeFields":[{"name":"classes","active":true}]}]}],"title":"Markup","selectorType":"topLevel","form":null},"dropzone":[],"title":"Markup","selectorType":"topLevel"},"hideNoData":{"topLevel":{"formDefinition":[{"formKey":"tab-hide-data-settings","children":[{"formKey":"tab-hide-data-hide","breakpoints":[],"activeFields":[{"name":"hideEnable","active":true},{"name":"hideData","active":true}]}]}],"title":"Hide if no data","selectorType":"topLevel","form":null},"dropzone":[],"title":"Hide if no data","selectorType":"topLevel"}},"7a06e0dd-09b8-42c2-aabe-b1438923b631":{"settings":{"topLevel":{"formDefinition":[{"formKey":"container-settings","children":[{"formKey":"container-width","breakpoints":[],"activeFields":[{"name":"width","active":true}]},{"formKey":"common-link-animation","breakpoints":[{"name":"xl"}],"activeFields":[{"name":"linkAnimation","active":true},{"name":"animationType","active":true},{"name":"animationScope","active":true},{"name":"animationParent","active":true},{"name":"animationTarget","active":true},{"name":"animationScale","active":true},{"name":"animationDirection","active":true},{"name":"animationDirection","active":true},{"name":"animationDirection","active":true},{"name":"animationDistance","active":true},{"name":"animationPieces","active":true},{"name":"animationOrigin","active":true},{"name":"animationFoldHeight","active":true},{"name":"animationHorizontalFirst","active":true},{"name":"animationIterations","active":true},{"name":"animationEasing","active":true},{"name":"animationDuration","active":true}]},{"formKey":"container-style","breakpoints":[],"activeFields":[{"name":"customStyle","active":true},{"name":"customStyle","active":true}]},{"formKey":"common-link-modifier","breakpoints":[],"activeFields":[{"name":"modifierType","active":true}]}]}],"selectorType":"topLevel","form":null},"dropzone":[],"selectorType":"topLevel"},"styles":{"topLevel":{"formDefinition":[{"formKey":"layout","children":[{"formKey":"position","breakpoints":[{"name":"xl"}],"activeFields":[{"name":"position","active":true},{"name":"top","active":true},{"name":"bottom","active":true},{"name":"left","active":true},{"name":"right","active":true},{"name":"z-index","active":true}]}]}],"selectorType":"topLevel","form":null},"dropzone":[]}},"ff76fed0-7581-4d0e-aaa7-8b8e95aafc47":{"settings":{"topLevel":{"formDefinition":[{"formKey":"heading-settings","children":[{"formKey":"heading-element","breakpoints":[],"activeFields":[{"name":"element","active":true}]},{"formKey":"heading-heading","breakpoints":[],"activeFields":[{"name":"content","active":true}]},{"formKey":"heading-style","breakpoints":[],"activeFields":[{"name":"customStyle","active":true},{"name":"customStyle","active":true}]}]}],"selectorType":"topLevel","form":null},"dropzone":[],"selectorType":"topLevel"},"styles":{"topLevel":{"formDefinition":[],"selectorType":"topLevel","form":null},"dropzone":[]},"hideNoData":{"topLevel":{"formDefinition":[{"formKey":"tab-hide-data-settings","children":[{"formKey":"tab-hide-data-hide","breakpoints":[],"activeFields":[{"name":"hideEnable","active":true},{"name":"hideData","active":true}]}]}],"title":"Hide if no data","selectorType":"topLevel","form":null},"dropzone":[],"title":"Hide if no data","selectorType":"topLevel"},"markup":{"topLevel":{"formDefinition":[{"formKey":"tab-markup-classes-and-ids","children":[{"formKey":"tab-markup-add-classes","breakpoints":[],"activeFields":[{"name":"classes","active":true}]}]}],"title":"Markup","selectorType":"topLevel","form":null},"dropzone":[],"title":"Markup","selectorType":"topLevel"}},"0f40fc7f-90d0-404b-8a08-44d0d097fc1b":{"settings":{"topLevel":{"formDefinition":[{"formKey":"heading-settings","children":[{"formKey":"heading-element","breakpoints":[],"activeFields":[{"name":"element","active":true}]},{"formKey":"heading-heading","breakpoints":[],"activeFields":[{"name":"content","active":true}]},{"formKey":"heading-style","breakpoints":[],"activeFields":[{"name":"customStyle","active":true},{"name":"customStyle","active":true}]}]}],"selectorType":"topLevel","form":null},"dropzone":[],"selectorType":"topLevel"},"markup":{"topLevel":{"formDefinition":[{"formKey":"tab-markup-classes-and-ids","children":[{"formKey":"tab-markup-add-classes","breakpoints":[],"activeFields":[{"name":"classes","active":true}]}]}],"title":"Markup","selectorType":"topLevel","form":null},"dropzone":[],"title":"Markup","selectorType":"topLevel"}},"71f1c2d3-b4aa-414a-8995-2853632f7a46":{"settings":{"topLevel":{"formDefinition":[{"formKey":"image-settings","children":[{"formKey":"image-image","breakpoints":[],"activeFields":[{"name":"image","active":true},{"name":"title","active":true},{"name":"alt","active":true}]},{"formKey":"image-size","breakpoints":[{"name":"xl"}],"activeFields":[{"name":"displaySize","active":true},{"name":"imageAlignment","active":true}]},{"formKey":"image-style","breakpoints":[],"activeFields":[{"name":"imageStyle","active":true},{"name":"customStyle","active":true},{"name":"customStyle","active":true}]}]}],"selectorType":"topLevel","form":null},"dropzone":[],"selectorType":"topLevel"},"styles":{"topLevel":{"formDefinition":[{"formKey":"layout","children":[{"formKey":"position","breakpoints":[{"name":"xl"}],"activeFields":[{"name":"position","active":true},{"name":"top","active":true},{"name":"bottom","active":true},{"name":"left","active":true},{"name":"right","active":true},{"name":"z-index","active":true}]}]}],"selectorType":"topLevel","form":null},"dropzone":[]},"markup":{"topLevel":{"formDefinition":[{"formKey":"tab-markup-classes-and-ids","children":[{"formKey":"tab-markup-add-classes","breakpoints":[],"activeFields":[{"name":"classes","active":true}]}]}],"title":"Markup","selectorType":"topLevel","form":null},"dropzone":[],"title":"Markup","selectorType":"topLevel"},"hideNoData":{"topLevel":{"formDefinition":[{"formKey":"tab-hide-data-settings","children":[{"formKey":"tab-hide-data-hide","breakpoints":[],"activeFields":[{"name":"hideEnable","active":true},{"name":"hideData","active":true}]}]}],"title":"Hide if no data","selectorType":"topLevel","form":null},"dropzone":[],"title":"Hide if no data","selectorType":"topLevel"}}},"disabledNodes":[]}';

  /**
   * {@inheritdoc}
   */
  public function setUp() {
    $this->unit = new _0015EntityUpdate([], NULL, NULL);
  }

  /**
   * @covers \Drupal\cohesion\Plugin\EntityUpdate\_0015EntityUpdate::runUpdate
   */
  public function testRunUpdate() {

    // WYSIWYG in layout canvas.
    $layout = new _0015MockUpdateEntity($this->fixture_layout, TRUE);
    $this->assertionsLayoutCanvasBefore($layout->getDecodedJsonValues());
    $this->unit->runUpdate($layout);
    $this->assertionsLayoutCanvasAfter($layout->getDecodedJsonValues());
    $this->unit->runUpdate($layout);
    $this->assertionsLayoutCanvasAfter($layout->getDecodedJsonValues());
  }

  private function assertionsLayoutCanvasBefore($layout_array_before) {
    $this->assertArrayNotHasKey('variableFields', $layout_array_before);
  }

  private function assertionsLayoutCanvasAfter($layout_array_after) {
    $variable = [
      'settings.styles.xl.col',
      'settings.styles.ps.col',
      'settings.styles.md.col',
    ];
    $this->assertEquals($variable, $layout_array_after['variableFields']['81481250-e50c-4e2d-8fcd-7e4982a9f427']);

    $variable = [
      'settings.customStyle.0.customStyle',
      'settings.linkToPage',
    ];
    $this->assertEquals($variable, $layout_array_after['variableFields']['f83153f3-c4d3-4551-8268-d8c3d29fd99a']);

    $variable = [
      'settings.image',
      'settings.attributes.title',
      'settings.attributes.alt',
      'hideNoData.hideData',
    ];
    $this->assertEquals($variable, $layout_array_after['variableFields']['71f1c2d3-b4aa-414a-8995-2853632f7a46']);

    $variable = [
      'settings.content',
    ];
    $this->assertEquals($variable, $layout_array_after['variableFields']['0f40fc7f-90d0-404b-8a08-44d0d097fc1b']);

    $variable = [
      'settings.content',
      'hideNoData.hideData',
    ];
    $this->assertEquals($variable, $layout_array_after['variableFields']['ff76fed0-7581-4d0e-aaa7-8b8e95aafc47']);

    $this->assertArrayNotHasKey('5ecad84c-1903-402f-9d1b-a8c5b8d8a098', $layout_array_after['variableFields']);
  }

}
