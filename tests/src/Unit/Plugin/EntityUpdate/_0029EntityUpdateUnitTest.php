<?php

namespace Drupal\Tests\cohesion\Unit\Plugin\EntityUpdate;

use Drupal\Tests\UnitTestCase;
use Drupal\cohesion\Plugin\EntityUpdate\_0029EntityUpdate;

/**
 * Class MockUpdateEntity
 *
 * @package Drupal\Tests\cohesion\Unit
 */
class _0029MockEntity extends EntityMockBase  {

  protected $jsonMapper;

  public function __construct($json_values, $isLayoutCanvas = FALSE, $json_mapper = NULL) {
    parent::__construct($json_values, $isLayoutCanvas);
    if(!is_null($json_mapper)) {
      $this->jsonMapper = $json_mapper;
    }
  }

  public function getDecodedJsonMapper($as_array = FALSE) {
    if($as_array) {
      return json_decode($this->jsonMapper, TRUE);
    }else {
      return json_decode($this->jsonMapper);
    }
  }

  public function setJsonMapper($json_mapper) {
    $this->jsonMapper = $json_mapper;
  }


}

/**
 * @group Cohesion
 */
class _0029EntityUpdateUnitTest extends UnitTestCase {

  protected $unit;

  /**
   * {@inheritdoc}
   */
  public function setUp() {
    $this->unit = new _0029EntityUpdate([], null, null);
  }

  // custom style with some UUIDs as undefined.
  private $fixture_style_json_values = '{"preview":{"text":"<p><button class=\"coh-preview\" type=\"button\"><\/button><\/p>\n","textFormat":"cohesion"},"styles":{"settings":{"element":"button","class":"","combinator":"","pseudo":""},"undefined":{"styles":{"xl":{"color":{"value":{"link":true,"name":"Gray 30","uid":"gray-30","class":".coh-color-gray-30","variable":"$coh-color-gray-30","value":{"hex":"#bfbfbf","rgba":"rgba(191, 191, 191, 1)"},"inuse":false,"wysiwyg":true,"tags":["Light"]}}}}},"a0c3956b-830f-4384-8aae-93f04e74f1bc":{"styles":{"xl":{"content-string":{"customString":{}}}}}},"sBackgroundColour":"#ffffff","variableFields":[]}';
  private $fixture_style_json_mapper = '{"styles":{"title":"Button","selectorType":"topLevel","formDefinition":[],"items":[],"form":null}}';

  // custom style with some corrupt data.
  private $fixture_style_json_values_2 =  '{"preview":{"text":"<h1 class=\"coh-preview\">Default content for \'\'Heading\'\'.<\/h1>\n","textFormat":"cohesion"},"sBackgroundColour":"#FFFFFF","styles":{"settings":{"element":"h1","class":"","combinator":"","pseudo":""},"styles":{"xl":{"font-weight":{"value":"500"}}},"1d70a029-94d5-4108-b0da-dcee4775b30b":{"settings":{"element":"","class":"","combinator":"","pseudo":":focus"},"styles":{"xl":{"color":{"value":{"value":{"hex":"#036093","rgba":"rgba(3, 96, 147, 1)"},"name":"Color 3","uid":"color-3","class":".coh-color-color-3","variable":"$coh-color-color-3","wysiwyg":true,"inuse":true,"link":true}}}}},"d272bd21-d34a-41c1-b805-4036ff03c180":{"settings":{"element":".sd","class":"","combinator":"","pseudo":""},"styles":{"xl":{"border-width":{"value":"23"}}}},"24014420-3756-48f7-be13-adf2adfa7678":{"settings":{"element":"","class":"","combinator":"","pseudo":":before"},"styles":{"xl":{"color":{"value":{"value":{"hex":"#d83269","rgba":"rgba(216, 50, 105, 1)"},"name":"Color 4","uid":"color-4","class":".coh-color-color-4","variable":"$coh-color-color-4","wysiwyg":true,"inuse":true,"link":true}}}}}},"variableFields":[]}';
  private $fixture_style_json_mapper_2 =  '{"styles":{"title":"Heading","selectorType":"topLevel","formDefinition":[{"formKey":"font","children":[{"formKey":"font-and-color","breakpoints":[{"name":"xl"}],"activeFields":[{"name":"font-family","active":true},{"name":"font-weight","active":true},{"name":"color","active":true}]},{"formKey":"font-sizing-and-alignment","breakpoints":[{"name":"xl"}],"activeFields":[{"name":"font-size","active":true},{"name":"line-height","active":true},{"name":"text-align","active":true},{"name":"letter-spacing","active":false},{"name":"word-spacing","active":false},{"name":"text-indent","active":false}]}]},{"formKey":"layout","children":[{"formKey":"margin","breakpoints":[{"name":"xl"}],"activeFields":[{"name":"margin-equal","active":false},{"name":"margin-top","active":true},{"name":"margin-bottom","active":true},{"name":"margin-left","active":true},{"name":"margin-right","active":true},{"name":"margin-block-start","active":false},{"name":"margin-block-end","active":false},{"name":"margin-inline-start","active":false},{"name":"margin-inline-end","active":false}]}]}],"items":[{"title":".sd","type":"container","items":[],"form":null,"selectorType":"child","model":".sd","uuid":"d272bd21-d34a-41c1-b805-4036ff03c180","allowedTypes":["child","pseudo","modifier"],"formDefinition":[{"formKey":"border-and-outline","children":[{"formKey":"border-width","breakpoints":[{"name":"xl"}],"activeFields":[{"name":"border-width","active":true},{"name":"border-top-width","active":true},{"name":"border-bottom-width","active":true},{"name":"border-left-width","active":true},{"name":"border-right-width","active":true},{"name":"border-block-start-width","active":false},{"name":"border-block-end-width","active":false},{"name":"border-inline-start-width","active":false},{"name":"border-inline-end-width","active":false}]}]}]}],"form":null}}';

  // custom style with nested top level styles at breakpoints
  private $fixture_style_json_values_3 = '{"preview":{"text":"<div class=\"coh-preview\">\n<p>&nbsp;<\/p>\n<\/div>\n","textFormat":"cohesion"},"styles":{"settings":{"element":"div","class":"","combinator":"","pseudo":""},"styles":{"xl":{"background-color":{"value":{"value":{"hex":"#c0ffee","rgba":"rgba(192, 255, 238, 1)"},"name":"Light blue","uid":"light-blue","class":".coh-color-light-blue","variable":"$coh-color-light-blue","wysiwyg":true,"inuse":true}},"height":{"value":"100"},"box-shadow":[{"boxshadowType":{"value":"null"},"boxshadowHorizontal":{"value":"0"},"boxshadowVertical":{"value":"0"},"boxshadowBlur":{"value":"0"},"boxshadowSpread":{"value":"1"},"boxshadowColor":{"value":{"value":{"hex":"#1eb8d1","rgba":"rgba(30, 184, 209, 1)"},"name":"coh-blue","uid":"coh-blue","class":".coh-color-coh-blue","variable":"$coh-color-coh-blue","wysiwyg":true,"inuse":true}}}],"position":{"value":"relative"},"clearfix":{"value":true}},"styles":{"xl":{"box-shadow":[{"boxshadowType":{"value":"null"}}]}}},"9a0b2dde-b278-4b39-b23a-6543b8e06070":{"settings":{"element":"","class":"","combinator":"","pseudo":":before"},"styles":{"xl":{"content-string":{"contentType":{"value":"counter"},"counterString":{"value":"instance"}},"counters":{"counter-reset":{},"counter-increment":{"value":"instance"}},"font-size":{"value":"50"},"line-height":{},"text-align":{},"font-weight":{"value":"700"},"color":{"value":{"value":{"hex":"#1eb8d1","rgba":"rgba(30, 184, 209, 1)"},"name":"coh-blue","uid":"coh-blue","class":".coh-color-coh-blue","variable":"$coh-color-coh-blue","wysiwyg":true,"inuse":true}},"position":{"value":"absolute"},"display":{},"transform":{"transformTranslateX":{"value":"-50%"},"transformTranslateY":{"value":"-50%"}},"top":{"value":"50%"},"left":{"value":"50%"}}}}},"sBackgroundColour":"#FFFFFF"}';
  private $fixture_style_json_mapper_3 = '{"styles":{"selectorType":"topLevel","items":[{"title":":before","type":"container","items":[],"selectorType":"pseudo","formDefinition":[{"formKey":"content","children":[{"formKey":"strings-counters-quotes-urls-and-attributes","breakpoints":[{"name":"xl"}],"activeFields":[{"name":"contentType","active":true},{"name":"contentString","active":true},{"name":"counterString","active":true},{"name":"customString","active":true}]},{"formKey":"counters","breakpoints":[{"name":"xl"}],"activeFields":[{"name":"counter-reset","active":false},{"name":"counter-increment","active":true}]}]},{"formKey":"font","children":[{"formKey":"font-sizing-and-alignment","breakpoints":[{"name":"xl"}],"activeFields":[{"name":"font-size","active":true},{"name":"line-height","active":false},{"name":"text-align","active":false},{"name":"letter-spacing","active":false},{"name":"word-spacing","active":false},{"name":"text-indent","active":false}]},{"formKey":"font-and-color","breakpoints":[{"name":"xl"}],"activeFields":[{"name":"font-family","active":false},{"name":"font-weight","active":true},{"name":"color","active":true}]}]},{"formKey":"layout","children":[{"formKey":"position","breakpoints":[{"name":"xl"}],"activeFields":[{"name":"position","active":true},{"name":"top","active":true},{"name":"bottom","active":true},{"name":"left","active":true},{"name":"right","active":true},{"name":"z-index","active":true}]}]},{"formKey":"transform-and-transition","children":[{"formKey":"transform","breakpoints":[{"name":"xl"}],"activeFields":[{"name":"transformRotateX","active":false},{"name":"transformRotateY","active":false},{"name":"transformRotateZ","active":false},{"name":"transformTranslateX","active":true},{"name":"transformTranslateY","active":true},{"name":"transformScaleX","active":false},{"name":"transformScaleY","active":false},{"name":"transformSkewX","active":false},{"name":"transformSkewY","active":false},{"name":"transformOriginX","active":false},{"name":"transformOriginY","active":false}]}]}],"uuid":"9a0b2dde-b278-4b39-b23a-6543b8e06070"}],"title":"Layout","formDefinition":[{"formKey":"background","children":[{"formKey":"background-color","breakpoints":[{"name":"xl"}],"activeFields":[{"name":"background-color","active":true}]}]},{"formKey":"layout","children":[{"formKey":"height","breakpoints":[{"name":"xl"}],"activeFields":[{"name":"min-height","active":false},{"name":"max-height","active":false},{"name":"height","active":true}]},{"formKey":"box-shadow","breakpoints":[{"name":"xl"}],"activeFields":[{"name":"box-shadow","active":true},{"name":"boxshadowType","active":true},{"name":"boxshadowHorizontal","active":true},{"name":"boxshadowVertical","active":true},{"name":"boxshadowBlur","active":true},{"name":"boxshadowSpread","active":true},{"name":"boxshadowColor","active":true}]},{"formKey":"position","breakpoints":[{"name":"xl"}],"activeFields":[{"name":"position","active":true},{"name":"top","active":true},{"name":"bottom","active":true},{"name":"left","active":true},{"name":"right","active":true},{"name":"z-index","active":true}]},{"formKey":"float","breakpoints":[{"name":"xl"}],"activeFields":[{"name":"float","active":false},{"name":"clear","active":false},{"name":"clearfix","active":true}]}]}],"form":null}}';

  // Component with some correct data and some corrupt style data.
  private $fixture_component_1 = '{"canvas":[{"type":"container","uid":"link","title":"Link","status":{"collapsed":true,"collapsedParents":[]},"uuid":"f2a3508f-a9b7-4f33-99c3-734ad9559ce1","parentUid":"root","isContainer":true,"children":[]}],"componentForm":[],"mapper":{"f2a3508f-a9b7-4f33-99c3-734ad9559ce1":{"settings":{"formDefinition":[{"formKey":"link-settings","children":[{"formKey":"link-link","breakpoints":[],"activeFields":[{"name":"linkText","active":true},{"name":"titleAttribute","active":true},{"name":"type","active":true},{"name":"linkToPage","active":true},{"name":"url","active":true},{"name":"anchor","active":true},{"name":"scrollToSelector","active":true},{"name":"scrollToDuration","active":true},{"name":"scrollToOffsetType","active":true},{"name":"scrollToOffsetPx","active":true},{"name":"scrollToOffsetElement","active":true},{"name":"target","active":true},{"name":"helpText","active":true},{"name":"triggerId","active":true},{"name":"modalId","active":true}]},{"formKey":"link-modifier","breakpoints":[],"activeFields":[{"name":"modifier","active":true},{"name":"modifierType","active":true},{"name":"interactionScope","active":true},{"name":"interactionParent","active":true},{"name":"interactionTarget","active":true},{"name":"modifierName","active":true}]},{"formKey":"link-animation","breakpoints":[{"name":"xl"}],"activeFields":[{"name":"linkAnimation","active":true},{"name":"animationType","active":true},{"name":"animationScope","active":true},{"name":"animationParent","active":true},{"name":"animationTarget","active":true},{"name":"animationScale","active":true},{"name":"animationDirection","active":true},{"name":"animationDirection","active":true},{"name":"animationDirection","active":true},{"name":"animationDistance","active":true},{"name":"animationPieces","active":true},{"name":"animationOrigin","active":true},{"name":"animationFoldHeight","active":true},{"name":"animationHorizontalFirst","active":true},{"name":"animationIterations","active":true},{"name":"animationEasing","active":true},{"name":"animationDuration","active":true}]},{"formKey":"link-style","breakpoints":[],"activeFields":[{"name":"customStyle","active":true},{"name":"customStyle","active":true}]}]}],"selectorType":"topLevel","form":null,"items":[]},"styles":{"formDefinition":[],"selectorType":"topLevel","items":[{"title":".test-selector","type":"container","items":[],"form":null,"selectorType":"child","model":".test-selector","uuid":"b8bb5a7a-f1bb-44f4-b3fb-530118dc4ac3","allowedTypes":["child","pseudo","modifier"],"formDefinition":[{"formKey":"background","children":[{"formKey":"background-color","breakpoints":[{"name":"xl"}],"activeFields":[{"name":"background-color","active":true}]}]}]}],"form":null},"markup":{"formDefinition":[{"formKey":"tab-markup-classes-and-ids","children":[{"formKey":"tab-markup-add-classes","breakpoints":[],"activeFields":[{"name":"classes","active":true}]}]},{"formKey":"tab-markup-attributes","children":[{"formKey":"tab-markup-add-attributes-values","breakpoints":[],"activeFields":[{"name":"attributes","active":true},{"name":"attribute","active":true},{"name":0,"active":true}]}]}],"title":"Markup","selectorType":"topLevel","form":null,"items":[]}}},"model":{"f2a3508f-a9b7-4f33-99c3-734ad9559ce1":{"settings":{"title":"Link","customStyle":[{"customStyle":""}],"settings":{"type":"internal-page","target":"_self","customStyle":[{"customStyle":""}]},"type":"url","target":"_blank","url":"#"},"context-visibility":{"contextVisibility":{"condition":"ALL"}},"styles":{"settings":{"element":"link"},"45d29c62-0253-4702-8ace-a32369de70a3":{"settings":{"element":"","class":"","combinator":"","pseudo":":before"},"styles":{"xl":{"content-icon":{"contentIcon":{"value":{"iconName":"61593","fontFamily":"icomoon"}}}}}},"012fb06d-3b0c-401f-aba9-a0709ae38f7a":{"settings":{"element":"","class":"","combinator":"","pseudo":":before"},"styles":{"xl":{"content-icon":{"contentIcon":{"value":{"iconName":"61593","fontFamily":"icomoon"}}}}}},"d43c8387-9931-4e14-95bd-25771fc10411":{"settings":{"element":"","class":"","combinator":"","pseudo":":before"},"styles":{"xl":{"content-icon":{"contentIcon":{"value":{"iconName":"61594","fontFamily":"icomoon"}}}}}},"ff98dd47-3b83-4e9a-a9a2-104b3599210c":{"settings":{"element":"","class":"","combinator":"","pseudo":":before"},"styles":{"xl":{"content-icon":{"contentIcon":{"value":{"iconName":"61802","fontFamily":"icomoon"}}}}}},"d51bd913-88bd-4232-8278-a4765a3aaeae":{"settings":{"element":"","class":"","combinator":"","pseudo":":before"},"styles":{"xl":{"content-icon":{"contentIcon":{"value":{"iconName":"61665","fontFamily":"icomoon"}}}}}},"f091d9df-588d-4d23-a396-3a3beb118adc":{"settings":{"element":"","class":"","combinator":"","pseudo":":before"},"styles":{"xl":{"content-icon":{"contentIcon":{"value":{"iconName":"61805","fontFamily":"icomoon"}}}}}},"265c2c16-8de2-4b3a-a056-8c15b962822b":{"settings":{"element":"","class":"","combinator":"","pseudo":":before"},"styles":{"xl":{"content-icon":{"contentIcon":{"value":{"iconName":"62001","fontFamily":"icomoon"}}}}}},"42295fa3-4cdb-4f21-9656-13b3ce076a85":{"settings":{"element":"","class":"","combinator":"","pseudo":":before"},"styles":{"xl":{"content-icon":{"contentIcon":{"value":{"iconName":"62010","fontFamily":"icomoon"}}}}}},"11ea0f53-52d7-43e3-b095-ed876eaa2b91":{"settings":{"element":"","class":"","combinator":"","pseudo":":before"},"styles":{"xl":{"content-icon":{"contentIcon":{"value":{"iconName":"62077","fontFamily":"icomoon"}}}}}},"14e2553a-ae3e-44da-a735-4d5adf59797e":{"settings":{"element":"","class":"","combinator":"","pseudo":":before"},"styles":{"xl":{"content-icon":{"contentIcon":{"value":{"iconName":"61598","fontFamily":"icomoon"}}}}}},"df091257-f6d5-44d0-9efa-e44a54c9906e":{"settings":{"element":"","class":"","combinator":"","pseudo":":hover"},"styles":{"xl":{"background-color":{"value":{"link":true,"name":"Gray 60","uid":"gray-60","class":".coh-color-gray-60","variable":"$coh-color-gray-60","value":{"hex":"#646464","rgba":"rgba(100, 100, 100, 1)"},"inuse":true,"wysiwyg":true,"tags":["Dark"]}}}}},"3a97aa47-ceac-4a7b-842c-ec0d29132cdc":{"settings":{"element":"","class":"","combinator":"","pseudo":":hover"},"styles":{}},"f0431431-f53e-4424-90a1-4582070af566":{"settings":{"element":"","class":"","combinator":"","pseudo":":hover"},"styles":{"xl":{"background-color":{"value":{"link":true,"name":"Gray 10","uid":"gray-10","class":".coh-color-gray-10","variable":"$coh-color-gray-10","value":{"hex":"#f2f2f2","rgba":"rgba(242, 242, 242, 1)"},"inuse":true,"wysiwyg":true,"tags":["Light"]}}}}},"a0afc35b-b841-4012-bf28-007e7cda26a6":{"settings":{"element":"","class":"","combinator":"","pseudo":":before"},"styles":{"xl":{"color":{"value":{"link":true,"name":"Brand color","uid":"brand-color","class":".coh-color-brand-color","variable":"$coh-color-brand-color","value":{"hex":"#26a3dd","rgba":"rgba(38, 163, 221, 1)"},"inuse":true,"wysiwyg":true,"tags":["Color"]}}}}},"b8bb5a7a-f1bb-44f4-b3fb-530118dc4ac3":{"settings":{"element":".test-selector","class":"","combinator":"","pseudo":""},"styles":{"xl":{"background-color":{"value":{"name":"White","uid":"white","value":{"hex":"#ffffff","rgba":"rgba(255, 255, 255, 1)"},"wysiwyg":true,"class":".coh-color-white","variable":"$coh-color-white","inuse":false}}}}}},"markup":{"attributes":[{"attribute":"aria-label","value":"[field.526ba935-8267-4655-af08-30ca51b20664] [field.5ca3ed1b-1968-4b05-88cd-b0ed0f68dd63]"}]}}},"previewModel":{"dc582768-e37c-4caf-b783-78caf05b89fb":{},"f2a3508f-a9b7-4f33-99c3-734ad9559ce1":{"settings":{"customStyle":[{},{}]},"markup":{"attributes":[{"value":""}]}},"7baf7e49-8302-4eea-817d-98154f0484e8":{}},"variableFields":{"dc582768-e37c-4caf-b783-78caf05b89fb":[],"f2a3508f-a9b7-4f33-99c3-734ad9559ce1":["markup.attributes.0.value"],"7baf7e49-8302-4eea-817d-98154f0484e8":[]},"meta":{"fieldHistory":[{"uuid":"b31f5ba2-87b8-4ffa-918c-7da1ee928e28","type":"form-select","machineName":"add-space-below"},{"uuid":"4892710b-5599-4a80-95a4-e9ad1f89fd61","type":"form-select","machineName":"height"},{"uuid":"d743012b-28f8-4272-835f-b73c5de4c77c","type":"form-input-hidden","machineName":"conditional-padding"},{"uuid":"4bbd774e-9ef6-4670-bdad-201f4b658c74","type":"form-select","machineName":"card-padding"},{"uuid":"9dea5fc4-ab54-4274-907b-67e9245c5aa6","type":"form-colorpicker","machineName":"border-color"},{"uuid":"2dc50adb-f881-4da2-8a2c-9af49d3fb42f","type":"form-select","machineName":"border"},{"uuid":"aa9b78a1-22a3-433a-93de-30cdaf87d33f","type":"form-input-hidden","machineName":"conditional-text-color-colored-background"},{"uuid":"a34f192d-9e1e-4b4e-815f-0b8b3f1b08db","type":"form-input-hidden","machineName":"conditional-text-color-dark-background"},{"uuid":"a685adf4-cb5e-4668-986c-3faa0991f203","type":"form-input-hidden","machineName":"conditional-text-color-light-background"},{"uuid":"605f0de9-ca36-48ac-b88b-bccc0aa06a2d","type":"form-select","machineName":"icon-color"},{"uuid":"ed702d13-2379-4ee4-8028-ebd8829b694c","type":"form-select","machineName":"text-color"},{"uuid":"4b2e4f39-501f-4e81-8747-b963f1e87c03","type":"form-colorpicker","machineName":"background-color"},{"uuid":"8463cb54-9a07-4db8-89f3-560d332decbe","type":"form-link","machineName":"link-to-social-network-page"},{"uuid":"5ca3ed1b-1968-4b05-88cd-b0ed0f68dd63","type":"form-select","machineName":"social-network"},{"uuid":"71466e21-2fa7-46e0-8cbe-efe9885850c9","type":"form-field-repeater","machineName":"field-repeater"},{"uuid":"526ba935-8267-4655-af08-30ca51b20664","type":"form-input","machineName":"follow-text"},{"uuid":"7baf7e49-8302-4eea-817d-98154f0484e8","type":"form-select","machineName":"select"},{"uuid":"6af29d36-f721-4875-b0f8-4c2a4b977967","type":"form-select","machineName":"link-color"},{"uuid":"e807c2f4-7226-4853-ad0f-a16e29094ca7","type":"form-iconpicker","machineName":"social-network-icon"},{"uuid":"c1234602-9f71-4694-b7f0-b3a48c0ef82e","type":"form-select","machineName":"card-layout"},{"uuid":"2bef22e8-36e0-47f7-81b9-b548bf9bc34b","type":"form-link","machineName":"link-to-page-or-url"},{"uuid":"662cfc54-98e1-46da-97e2-b4d4c78bf601","type":"form-input","machineName":"link-text"},{"uuid":"0d72adfc-c485-47a7-9630-65104da3c312","type":"form-textarea","machineName":"description"},{"uuid":"bc8e9792-9d8e-4daf-9e2e-14f68ddc8955","type":"form-input","machineName":"card-heading"},{"uuid":"81b7a06a-0753-437e-a7aa-30cfdfde5de5","type":"form-input","machineName":"alt-tag"},{"uuid":"954f5fb5-5f14-418e-955f-b3ea82f64d5c","type":"form-image","machineName":"image-icon"},{"machineName":"add-space-below"},{"uuid":"7a42f415-8db4-48c3-ad52-6058aba5b7d6","type":"form-select","machineName":"image-icon-position"},{"uuid":"691d363f-0fe1-4d4b-800d-d0a57d84d69b","type":"form-select","machineName":"divide-text-into-columns"},{"uuid":"2c0999e8-789f-4a34-bf3b-d4bbca643f36","type":"form-wysiwyg","machineName":"text-editor"},{"uuid":"85316573-481d-4a21-a39c-602ed90887d7","type":"form-checkbox-toggle","machineName":"padding-around-content"},{"uuid":"43db7692-a816-4ccd-b60c-7e9b493cc8be","type":"form-select","machineName":"padding"}]}}';

  // Component with all corrupt style data.
  private $fixture_component_2 = '{"canvas":[{"type":"container","uid":"link","title":"Link","status":{"collapsed":true,"collapsedParents":[]},"uuid":"f2a3508f-a9b7-4f33-99c3-734ad9559ce1","parentUid":"root","isContainer":true,"children":[]}],"componentForm":[],"mapper":{"f2a3508f-a9b7-4f33-99c3-734ad9559ce1":{"settings":{"formDefinition":[{"formKey":"link-settings","children":[{"formKey":"link-link","breakpoints":[],"activeFields":[{"name":"linkText","active":true},{"name":"titleAttribute","active":true},{"name":"type","active":true},{"name":"linkToPage","active":true},{"name":"url","active":true},{"name":"anchor","active":true},{"name":"scrollToSelector","active":true},{"name":"scrollToDuration","active":true},{"name":"scrollToOffsetType","active":true},{"name":"scrollToOffsetPx","active":true},{"name":"scrollToOffsetElement","active":true},{"name":"target","active":true},{"name":"helpText","active":true},{"name":"triggerId","active":true},{"name":"modalId","active":true}]},{"formKey":"link-modifier","breakpoints":[],"activeFields":[{"name":"modifier","active":true},{"name":"modifierType","active":true},{"name":"interactionScope","active":true},{"name":"interactionParent","active":true},{"name":"interactionTarget","active":true},{"name":"modifierName","active":true}]},{"formKey":"link-animation","breakpoints":[{"name":"xl"}],"activeFields":[{"name":"linkAnimation","active":true},{"name":"animationType","active":true},{"name":"animationScope","active":true},{"name":"animationParent","active":true},{"name":"animationTarget","active":true},{"name":"animationScale","active":true},{"name":"animationDirection","active":true},{"name":"animationDirection","active":true},{"name":"animationDirection","active":true},{"name":"animationDistance","active":true},{"name":"animationPieces","active":true},{"name":"animationOrigin","active":true},{"name":"animationFoldHeight","active":true},{"name":"animationHorizontalFirst","active":true},{"name":"animationIterations","active":true},{"name":"animationEasing","active":true},{"name":"animationDuration","active":true}]},{"formKey":"link-style","breakpoints":[],"activeFields":[{"name":"customStyle","active":true},{"name":"customStyle","active":true}]}]}],"selectorType":"topLevel","form":null,"items":[]},"styles":{"formDefinition":[],"selectorType":"topLevel","items":[],"form":null},"markup":{"formDefinition":[{"formKey":"tab-markup-classes-and-ids","children":[{"formKey":"tab-markup-add-classes","breakpoints":[],"activeFields":[{"name":"classes","active":true}]}]},{"formKey":"tab-markup-attributes","children":[{"formKey":"tab-markup-add-attributes-values","breakpoints":[],"activeFields":[{"name":"attributes","active":true},{"name":"attribute","active":true},{"name":0,"active":true}]}]}],"title":"Markup","selectorType":"topLevel","form":null,"items":[]}}},"model":{"f2a3508f-a9b7-4f33-99c3-734ad9559ce1":{"settings":{"title":"Link","customStyle":[{"customStyle":""}],"settings":{"type":"internal-page","target":"_self","customStyle":[{"customStyle":""}]},"type":"url","target":"_blank","url":"#"},"context-visibility":{"contextVisibility":{"condition":"ALL"}},"styles":{"settings":{"element":"link"},"45d29c62-0253-4702-8ace-a32369de70a3":{"settings":{"element":"","class":"","combinator":"","pseudo":":before"},"styles":{"xl":{"content-icon":{"contentIcon":{"value":{"iconName":"61593","fontFamily":"icomoon"}}}}}},"012fb06d-3b0c-401f-aba9-a0709ae38f7a":{"settings":{"element":"","class":"","combinator":"","pseudo":":before"},"styles":{"xl":{"content-icon":{"contentIcon":{"value":{"iconName":"61593","fontFamily":"icomoon"}}}}}},"d43c8387-9931-4e14-95bd-25771fc10411":{"settings":{"element":"","class":"","combinator":"","pseudo":":before"},"styles":{"xl":{"content-icon":{"contentIcon":{"value":{"iconName":"61594","fontFamily":"icomoon"}}}}}},"ff98dd47-3b83-4e9a-a9a2-104b3599210c":{"settings":{"element":"","class":"","combinator":"","pseudo":":before"},"styles":{"xl":{"content-icon":{"contentIcon":{"value":{"iconName":"61802","fontFamily":"icomoon"}}}}}},"d51bd913-88bd-4232-8278-a4765a3aaeae":{"settings":{"element":"","class":"","combinator":"","pseudo":":before"},"styles":{"xl":{"content-icon":{"contentIcon":{"value":{"iconName":"61665","fontFamily":"icomoon"}}}}}},"f091d9df-588d-4d23-a396-3a3beb118adc":{"settings":{"element":"","class":"","combinator":"","pseudo":":before"},"styles":{"xl":{"content-icon":{"contentIcon":{"value":{"iconName":"61805","fontFamily":"icomoon"}}}}}},"265c2c16-8de2-4b3a-a056-8c15b962822b":{"settings":{"element":"","class":"","combinator":"","pseudo":":before"},"styles":{"xl":{"content-icon":{"contentIcon":{"value":{"iconName":"62001","fontFamily":"icomoon"}}}}}},"42295fa3-4cdb-4f21-9656-13b3ce076a85":{"settings":{"element":"","class":"","combinator":"","pseudo":":before"},"styles":{"xl":{"content-icon":{"contentIcon":{"value":{"iconName":"62010","fontFamily":"icomoon"}}}}}},"11ea0f53-52d7-43e3-b095-ed876eaa2b91":{"settings":{"element":"","class":"","combinator":"","pseudo":":before"},"styles":{"xl":{"content-icon":{"contentIcon":{"value":{"iconName":"62077","fontFamily":"icomoon"}}}}}},"14e2553a-ae3e-44da-a735-4d5adf59797e":{"settings":{"element":"","class":"","combinator":"","pseudo":":before"},"styles":{"xl":{"content-icon":{"contentIcon":{"value":{"iconName":"61598","fontFamily":"icomoon"}}}}}},"df091257-f6d5-44d0-9efa-e44a54c9906e":{"settings":{"element":"","class":"","combinator":"","pseudo":":hover"},"styles":{"xl":{"background-color":{"value":{"link":true,"name":"Gray 60","uid":"gray-60","class":".coh-color-gray-60","variable":"$coh-color-gray-60","value":{"hex":"#646464","rgba":"rgba(100, 100, 100, 1)"},"inuse":true,"wysiwyg":true,"tags":["Dark"]}}}}},"3a97aa47-ceac-4a7b-842c-ec0d29132cdc":{"settings":{"element":"","class":"","combinator":"","pseudo":":hover"},"styles":{}},"f0431431-f53e-4424-90a1-4582070af566":{"settings":{"element":"","class":"","combinator":"","pseudo":":hover"},"styles":{"xl":{"background-color":{"value":{"link":true,"name":"Gray 10","uid":"gray-10","class":".coh-color-gray-10","variable":"$coh-color-gray-10","value":{"hex":"#f2f2f2","rgba":"rgba(242, 242, 242, 1)"},"inuse":true,"wysiwyg":true,"tags":["Light"]}}}}},"a0afc35b-b841-4012-bf28-007e7cda26a6":{"settings":{"element":"","class":"","combinator":"","pseudo":":before"},"styles":{"xl":{"color":{"value":{"link":true,"name":"Brand color","uid":"brand-color","class":".coh-color-brand-color","variable":"$coh-color-brand-color","value":{"hex":"#26a3dd","rgba":"rgba(38, 163, 221, 1)"},"inuse":true,"wysiwyg":true,"tags":["Color"]}}}}}},"markup":{"attributes":[{"attribute":"aria-label","value":"[field.526ba935-8267-4655-af08-30ca51b20664] [field.5ca3ed1b-1968-4b05-88cd-b0ed0f68dd63]"}]}}},"previewModel":{"dc582768-e37c-4caf-b783-78caf05b89fb":{},"f2a3508f-a9b7-4f33-99c3-734ad9559ce1":{"settings":{"customStyle":[{},{}]},"markup":{"attributes":[{"value":""}]}},"7baf7e49-8302-4eea-817d-98154f0484e8":{}},"variableFields":{"dc582768-e37c-4caf-b783-78caf05b89fb":[],"f2a3508f-a9b7-4f33-99c3-734ad9559ce1":["markup.attributes.0.value"],"7baf7e49-8302-4eea-817d-98154f0484e8":[]},"meta":{"fieldHistory":[{"uuid":"b31f5ba2-87b8-4ffa-918c-7da1ee928e28","type":"form-select","machineName":"add-space-below"},{"uuid":"4892710b-5599-4a80-95a4-e9ad1f89fd61","type":"form-select","machineName":"height"},{"uuid":"d743012b-28f8-4272-835f-b73c5de4c77c","type":"form-input-hidden","machineName":"conditional-padding"},{"uuid":"4bbd774e-9ef6-4670-bdad-201f4b658c74","type":"form-select","machineName":"card-padding"},{"uuid":"9dea5fc4-ab54-4274-907b-67e9245c5aa6","type":"form-colorpicker","machineName":"border-color"},{"uuid":"2dc50adb-f881-4da2-8a2c-9af49d3fb42f","type":"form-select","machineName":"border"},{"uuid":"aa9b78a1-22a3-433a-93de-30cdaf87d33f","type":"form-input-hidden","machineName":"conditional-text-color-colored-background"},{"uuid":"a34f192d-9e1e-4b4e-815f-0b8b3f1b08db","type":"form-input-hidden","machineName":"conditional-text-color-dark-background"},{"uuid":"a685adf4-cb5e-4668-986c-3faa0991f203","type":"form-input-hidden","machineName":"conditional-text-color-light-background"},{"uuid":"605f0de9-ca36-48ac-b88b-bccc0aa06a2d","type":"form-select","machineName":"icon-color"},{"uuid":"ed702d13-2379-4ee4-8028-ebd8829b694c","type":"form-select","machineName":"text-color"},{"uuid":"4b2e4f39-501f-4e81-8747-b963f1e87c03","type":"form-colorpicker","machineName":"background-color"},{"uuid":"8463cb54-9a07-4db8-89f3-560d332decbe","type":"form-link","machineName":"link-to-social-network-page"},{"uuid":"5ca3ed1b-1968-4b05-88cd-b0ed0f68dd63","type":"form-select","machineName":"social-network"},{"uuid":"71466e21-2fa7-46e0-8cbe-efe9885850c9","type":"form-field-repeater","machineName":"field-repeater"},{"uuid":"526ba935-8267-4655-af08-30ca51b20664","type":"form-input","machineName":"follow-text"},{"uuid":"7baf7e49-8302-4eea-817d-98154f0484e8","type":"form-select","machineName":"select"},{"uuid":"6af29d36-f721-4875-b0f8-4c2a4b977967","type":"form-select","machineName":"link-color"},{"uuid":"e807c2f4-7226-4853-ad0f-a16e29094ca7","type":"form-iconpicker","machineName":"social-network-icon"},{"uuid":"c1234602-9f71-4694-b7f0-b3a48c0ef82e","type":"form-select","machineName":"card-layout"},{"uuid":"2bef22e8-36e0-47f7-81b9-b548bf9bc34b","type":"form-link","machineName":"link-to-page-or-url"},{"uuid":"662cfc54-98e1-46da-97e2-b4d4c78bf601","type":"form-input","machineName":"link-text"},{"uuid":"0d72adfc-c485-47a7-9630-65104da3c312","type":"form-textarea","machineName":"description"},{"uuid":"bc8e9792-9d8e-4daf-9e2e-14f68ddc8955","type":"form-input","machineName":"card-heading"},{"uuid":"81b7a06a-0753-437e-a7aa-30cfdfde5de5","type":"form-input","machineName":"alt-tag"},{"uuid":"954f5fb5-5f14-418e-955f-b3ea82f64d5c","type":"form-image","machineName":"image-icon"},{"machineName":"add-space-below"},{"uuid":"7a42f415-8db4-48c3-ad52-6058aba5b7d6","type":"form-select","machineName":"image-icon-position"},{"uuid":"691d363f-0fe1-4d4b-800d-d0a57d84d69b","type":"form-select","machineName":"divide-text-into-columns"},{"uuid":"2c0999e8-789f-4a34-bf3b-d4bbca643f36","type":"form-wysiwyg","machineName":"text-editor"},{"uuid":"85316573-481d-4a21-a39c-602ed90887d7","type":"form-checkbox-toggle","machineName":"padding-around-content"},{"uuid":"43db7692-a816-4ccd-b60c-7e9b493cc8be","type":"form-select","machineName":"padding"}]}}';

  // Component with some correct data and some corrupt style data - nested styles.
  private $fixture_component_3 = '{"canvas":[{"type":"container","uid":"link","title":"Link","status":{"collapsed":true,"collapsedParents":[]},"uuid":"f2a3508f-a9b7-4f33-99c3-734ad9559ce1","parentUid":"root","isContainer":true,"children":[]}],"componentForm":[],"mapper":{"f2a3508f-a9b7-4f33-99c3-734ad9559ce1":{"settings":{"formDefinition":[{"formKey":"link-settings","children":[{"formKey":"link-link","breakpoints":[],"activeFields":[{"name":"linkText","active":true},{"name":"titleAttribute","active":true},{"name":"type","active":true},{"name":"linkToPage","active":true},{"name":"url","active":true},{"name":"anchor","active":true},{"name":"scrollToSelector","active":true},{"name":"scrollToDuration","active":true},{"name":"scrollToOffsetType","active":true},{"name":"scrollToOffsetPx","active":true},{"name":"scrollToOffsetElement","active":true},{"name":"target","active":true},{"name":"helpText","active":true},{"name":"triggerId","active":true},{"name":"modalId","active":true}]},{"formKey":"link-modifier","breakpoints":[],"activeFields":[{"name":"modifier","active":true},{"name":"modifierType","active":true},{"name":"interactionScope","active":true},{"name":"interactionParent","active":true},{"name":"interactionTarget","active":true},{"name":"modifierName","active":true}]},{"formKey":"link-animation","breakpoints":[{"name":"xl"}],"activeFields":[{"name":"linkAnimation","active":true},{"name":"animationType","active":true},{"name":"animationScope","active":true},{"name":"animationParent","active":true},{"name":"animationTarget","active":true},{"name":"animationScale","active":true},{"name":"animationDirection","active":true},{"name":"animationDirection","active":true},{"name":"animationDirection","active":true},{"name":"animationDistance","active":true},{"name":"animationPieces","active":true},{"name":"animationOrigin","active":true},{"name":"animationFoldHeight","active":true},{"name":"animationHorizontalFirst","active":true},{"name":"animationIterations","active":true},{"name":"animationEasing","active":true},{"name":"animationDuration","active":true}]},{"formKey":"link-style","breakpoints":[],"activeFields":[{"name":"customStyle","active":true},{"name":"customStyle","active":true}]}]}],"selectorType":"topLevel","form":null,"items":[]},"styles":{"formDefinition":[],"selectorType":"topLevel","items":[{"title":".test-selector","type":"container","items":[{"title":":before","type":"container","items":[],"form":null,"selectorType":"pseudo","uuid":"21733b1e-d256-4662-9408-d0b619c5b2b5","allowedTypes":["child","pseudo"],"formDefinition":[{"formKey":"content","children":[{"formKey":"strings-counters-quotes-urls-and-attributes","breakpoints":[{"name":"xl"}],"activeFields":[{"name":"contentType","active":true},{"name":"contentString","active":true},{"name":"counterString","active":true},{"name":"customString","active":true}]}]}]}],"form":null,"selectorType":"child","model":".test-selector","uuid":"813d598a-e21f-43d9-8a14-7756d31edb04","allowedTypes":["child","pseudo","modifier"],"formDefinition":[{"formKey":"background","children":[{"formKey":"background-color","breakpoints":[{"name":"xl"}],"activeFields":[{"name":"background-color","active":true}]}]}]}],"form":null},"markup":{"formDefinition":[{"formKey":"tab-markup-classes-and-ids","children":[{"formKey":"tab-markup-add-classes","breakpoints":[],"activeFields":[{"name":"classes","active":true}]}]},{"formKey":"tab-markup-attributes","children":[{"formKey":"tab-markup-add-attributes-values","breakpoints":[],"activeFields":[{"name":"attributes","active":true},{"name":"attribute","active":true},{"name":0,"active":true}]}]}],"title":"Markup","selectorType":"topLevel","form":null,"items":[]}}},"model":{"f2a3508f-a9b7-4f33-99c3-734ad9559ce1":{"settings":{"title":"Link","customStyle":[{"customStyle":""}],"settings":{"type":"internal-page","target":"_self","customStyle":[{"customStyle":""}]},"type":"url","target":"_blank","url":"#"},"context-visibility":{"contextVisibility":{"condition":"ALL"}},"styles":{"settings":{"element":"link"},"45d29c62-0253-4702-8ace-a32369de70a3":{"settings":{"element":"","class":"","combinator":"","pseudo":":before"},"styles":{"xl":{"content-icon":{"contentIcon":{"value":{"iconName":"61593","fontFamily":"icomoon"}}}}}},"012fb06d-3b0c-401f-aba9-a0709ae38f7a":{"settings":{"element":"","class":"","combinator":"","pseudo":":before"},"styles":{"xl":{"content-icon":{"contentIcon":{"value":{"iconName":"61593","fontFamily":"icomoon"}}}}}},"d43c8387-9931-4e14-95bd-25771fc10411":{"settings":{"element":"","class":"","combinator":"","pseudo":":before"},"styles":{"xl":{"content-icon":{"contentIcon":{"value":{"iconName":"61594","fontFamily":"icomoon"}}}}}},"ff98dd47-3b83-4e9a-a9a2-104b3599210c":{"settings":{"element":"","class":"","combinator":"","pseudo":":before"},"styles":{"xl":{"content-icon":{"contentIcon":{"value":{"iconName":"61802","fontFamily":"icomoon"}}}}}},"d51bd913-88bd-4232-8278-a4765a3aaeae":{"settings":{"element":"","class":"","combinator":"","pseudo":":before"},"styles":{"xl":{"content-icon":{"contentIcon":{"value":{"iconName":"61665","fontFamily":"icomoon"}}}}}},"f091d9df-588d-4d23-a396-3a3beb118adc":{"settings":{"element":"","class":"","combinator":"","pseudo":":before"},"styles":{"xl":{"content-icon":{"contentIcon":{"value":{"iconName":"61805","fontFamily":"icomoon"}}}}}},"265c2c16-8de2-4b3a-a056-8c15b962822b":{"settings":{"element":"","class":"","combinator":"","pseudo":":before"},"styles":{"xl":{"content-icon":{"contentIcon":{"value":{"iconName":"62001","fontFamily":"icomoon"}}}}}},"42295fa3-4cdb-4f21-9656-13b3ce076a85":{"settings":{"element":"","class":"","combinator":"","pseudo":":before"},"styles":{"xl":{"content-icon":{"contentIcon":{"value":{"iconName":"62010","fontFamily":"icomoon"}}}}}},"11ea0f53-52d7-43e3-b095-ed876eaa2b91":{"settings":{"element":"","class":"","combinator":"","pseudo":":before"},"styles":{"xl":{"content-icon":{"contentIcon":{"value":{"iconName":"62077","fontFamily":"icomoon"}}}}}},"14e2553a-ae3e-44da-a735-4d5adf59797e":{"settings":{"element":"","class":"","combinator":"","pseudo":":before"},"styles":{"xl":{"content-icon":{"contentIcon":{"value":{"iconName":"61598","fontFamily":"icomoon"}}}}}},"df091257-f6d5-44d0-9efa-e44a54c9906e":{"settings":{"element":"","class":"","combinator":"","pseudo":":hover"},"styles":{"xl":{"background-color":{"value":{"link":true,"name":"Gray 60","uid":"gray-60","class":".coh-color-gray-60","variable":"$coh-color-gray-60","value":{"hex":"#646464","rgba":"rgba(100, 100, 100, 1)"},"inuse":true,"wysiwyg":true,"tags":["Dark"]}}}}},"3a97aa47-ceac-4a7b-842c-ec0d29132cdc":{"settings":{"element":"","class":"","combinator":"","pseudo":":hover"},"styles":{}},"f0431431-f53e-4424-90a1-4582070af566":{"settings":{"element":"","class":"","combinator":"","pseudo":":hover"},"styles":{"xl":{"background-color":{"value":{"link":true,"name":"Gray 10","uid":"gray-10","class":".coh-color-gray-10","variable":"$coh-color-gray-10","value":{"hex":"#f2f2f2","rgba":"rgba(242, 242, 242, 1)"},"inuse":true,"wysiwyg":true,"tags":["Light"]}}}}},"a0afc35b-b841-4012-bf28-007e7cda26a6":{"settings":{"element":"","class":"","combinator":"","pseudo":":before"},"styles":{"xl":{"color":{"value":{"link":true,"name":"Brand color","uid":"brand-color","class":".coh-color-brand-color","variable":"$coh-color-brand-color","value":{"hex":"#26a3dd","rgba":"rgba(38, 163, 221, 1)"},"inuse":true,"wysiwyg":true,"tags":["Color"]}}}}},"813d598a-e21f-43d9-8a14-7756d31edb04":{"settings":{"element":".test-selector","class":"","combinator":"","pseudo":""},"styles":{"xl":{"background-color":{"value":{"value":{"hex":"transparent","rgba":"rgba(0, 0, 0, 0)"},"name":"Transparent","wysiwyg":true,"uid":"dx8-transparent","class":".dx8-transparent","variable":"$coh-dx8-transparent","inuse":true}}}}},"21733b1e-d256-4662-9408-d0b619c5b2b5":{"settings":{"element":"","class":"","combinator":"","pseudo":":before"},"styles":{"xl":{"content-string":{"contentType":{"value":"string"},"contentString":{"value":"test-string"}}}}},"6da32133-3799-48a1-9dcd-c485b417b2eb":{"settings":{"element":"","class":"","combinator":"","pseudo":":after"},"styles":{"xl":{"content-string":{"contentType":{"value":"string"},"contentString":{"value":"test-string-after"}}}}}},"markup":{"attributes":[{"attribute":"aria-label","value":"[field.526ba935-8267-4655-af08-30ca51b20664] [field.5ca3ed1b-1968-4b05-88cd-b0ed0f68dd63]"}]}}},"previewModel":{"dc582768-e37c-4caf-b783-78caf05b89fb":{},"f2a3508f-a9b7-4f33-99c3-734ad9559ce1":{"settings":{"customStyle":[{},{}]},"markup":{"attributes":[{"value":""}]}},"7baf7e49-8302-4eea-817d-98154f0484e8":{}},"variableFields":{"dc582768-e37c-4caf-b783-78caf05b89fb":[],"f2a3508f-a9b7-4f33-99c3-734ad9559ce1":["markup.attributes.0.value"],"7baf7e49-8302-4eea-817d-98154f0484e8":[]},"meta":{"fieldHistory":[{"uuid":"b31f5ba2-87b8-4ffa-918c-7da1ee928e28","type":"form-select","machineName":"add-space-below"},{"uuid":"4892710b-5599-4a80-95a4-e9ad1f89fd61","type":"form-select","machineName":"height"},{"uuid":"d743012b-28f8-4272-835f-b73c5de4c77c","type":"form-input-hidden","machineName":"conditional-padding"},{"uuid":"4bbd774e-9ef6-4670-bdad-201f4b658c74","type":"form-select","machineName":"card-padding"},{"uuid":"9dea5fc4-ab54-4274-907b-67e9245c5aa6","type":"form-colorpicker","machineName":"border-color"},{"uuid":"2dc50adb-f881-4da2-8a2c-9af49d3fb42f","type":"form-select","machineName":"border"},{"uuid":"aa9b78a1-22a3-433a-93de-30cdaf87d33f","type":"form-input-hidden","machineName":"conditional-text-color-colored-background"},{"uuid":"a34f192d-9e1e-4b4e-815f-0b8b3f1b08db","type":"form-input-hidden","machineName":"conditional-text-color-dark-background"},{"uuid":"a685adf4-cb5e-4668-986c-3faa0991f203","type":"form-input-hidden","machineName":"conditional-text-color-light-background"},{"uuid":"605f0de9-ca36-48ac-b88b-bccc0aa06a2d","type":"form-select","machineName":"icon-color"},{"uuid":"ed702d13-2379-4ee4-8028-ebd8829b694c","type":"form-select","machineName":"text-color"},{"uuid":"4b2e4f39-501f-4e81-8747-b963f1e87c03","type":"form-colorpicker","machineName":"background-color"},{"uuid":"8463cb54-9a07-4db8-89f3-560d332decbe","type":"form-link","machineName":"link-to-social-network-page"},{"uuid":"5ca3ed1b-1968-4b05-88cd-b0ed0f68dd63","type":"form-select","machineName":"social-network"},{"uuid":"71466e21-2fa7-46e0-8cbe-efe9885850c9","type":"form-field-repeater","machineName":"field-repeater"},{"uuid":"526ba935-8267-4655-af08-30ca51b20664","type":"form-input","machineName":"follow-text"},{"uuid":"7baf7e49-8302-4eea-817d-98154f0484e8","type":"form-select","machineName":"select"},{"uuid":"6af29d36-f721-4875-b0f8-4c2a4b977967","type":"form-select","machineName":"link-color"},{"uuid":"e807c2f4-7226-4853-ad0f-a16e29094ca7","type":"form-iconpicker","machineName":"social-network-icon"},{"uuid":"c1234602-9f71-4694-b7f0-b3a48c0ef82e","type":"form-select","machineName":"card-layout"},{"uuid":"2bef22e8-36e0-47f7-81b9-b548bf9bc34b","type":"form-link","machineName":"link-to-page-or-url"},{"uuid":"662cfc54-98e1-46da-97e2-b4d4c78bf601","type":"form-input","machineName":"link-text"},{"uuid":"0d72adfc-c485-47a7-9630-65104da3c312","type":"form-textarea","machineName":"description"},{"uuid":"bc8e9792-9d8e-4daf-9e2e-14f68ddc8955","type":"form-input","machineName":"card-heading"},{"uuid":"81b7a06a-0753-437e-a7aa-30cfdfde5de5","type":"form-input","machineName":"alt-tag"},{"uuid":"954f5fb5-5f14-418e-955f-b3ea82f64d5c","type":"form-image","machineName":"image-icon"},{"machineName":"add-space-below"},{"uuid":"7a42f415-8db4-48c3-ad52-6058aba5b7d6","type":"form-select","machineName":"image-icon-position"},{"uuid":"691d363f-0fe1-4d4b-800d-d0a57d84d69b","type":"form-select","machineName":"divide-text-into-columns"},{"uuid":"2c0999e8-789f-4a34-bf3b-d4bbca643f36","type":"form-wysiwyg","machineName":"text-editor"},{"uuid":"85316573-481d-4a21-a39c-602ed90887d7","type":"form-checkbox-toggle","machineName":"padding-around-content"},{"uuid":"43db7692-a816-4ccd-b60c-7e9b493cc8be","type":"form-select","machineName":"padding"}]}}';

  // Menu template layout canvas with multi level style tree - with no corrupt data.
  private $fixture_layout_canvas = '{"canvas":[{"type":"container","uid":"container","title":"Container","status":{"collapsed":false},"parentIndex":1,"uuid":"413af327-f715-4816-9a1c-766df8d86ae5","parentUid":"root","isContainer":true,"children":[{"type":"container","uid":"menu-list-container","title":"Menu list container","status":{"collapsed":false},"parentIndex":4,"uuid":"4bc246a9-e9e3-40a5-b0d4-630557d97367","parentUid":"container","isContainer":true,"children":[{"type":"container","uid":"menu-list-item","title":"Menu list item","status":{"collapsed":false},"parentIndex":4,"uuid":"848a6204-d6c1-499c-abca-5aaa0cb89827","parentUid":"menu-list-container","isContainer":true,"children":[{"type":"item","uid":"menu-link","title":"Menu link","status":{"collapsed":true},"parentIndex":4,"uuid":"86840b41-c130-418f-a53f-2bedd5e76358","parentUid":"menu-list-item","isContainer":false,"children":[]},{"type":"item","uid":"menu-button","title":"Menu button","status":{"collapsed":true},"parentIndex":4,"uuid":"64c3364a-07a9-493b-b9ed-c12e2d3ec9b1","parentUid":"menu-list-item","isContainer":false,"children":[]},{"type":"container","uid":"menu-list-container","title":"Menu list container","status":{"collapsed":false},"parentIndex":4,"uuid":"cf9edd3d-4685-4ac6-a306-a15da872c2c5","parentUid":"menu-list-item","isContainer":true,"children":[{"type":"container","uid":"menu-list-item","title":"Menu list item","status":{"collapsed":false},"parentIndex":4,"uuid":"e09da9c5-52b9-46f5-895a-b48df0fe3e6c","parentUid":"menu-list-container","isContainer":true,"children":[{"type":"item","uid":"menu-link","title":"Menu link","status":{"collapsed":true},"parentIndex":4,"uuid":"d9328d62-7398-4cbe-9e88-e10801276ffd","parentUid":"menu-list-item","isContainer":false,"children":[]}]}]}]}]}]}],"mapper":{"413af327-f715-4816-9a1c-766df8d86ae5":{"settings":{"selectorType":"topLevel","formDefinition":[{"formKey":"container-settings","children":[{"formKey":"container-width","breakpoints":[],"activeFields":[{"name":"width","active":true}]},{"formKey":"container-style","breakpoints":[],"activeFields":[{"name":"customStyle","active":true},{"name":"customStyle","active":true}]},{"formKey":"container-markup","breakpoints":[],"activeFields":[{"name":"htmlMarkup","active":true},{"name":"htmlMarkupCustom","active":true}]},{"formKey":"common-link-modifier","breakpoints":[],"activeFields":[{"name":"modifierType","active":true}]},{"formKey":"common-link-animation","breakpoints":[{"name":"xl"}],"activeFields":[{"name":"animationType","active":true}]},{"formKey":"common-link-modifier","breakpoints":[],"activeFields":[{"name":"modifierType","active":true}]}]}],"form":null},"styles":{"items":[{"title":".menu-level-1-ul","type":"container","items":[{"title":"> li","type":"container","items":[{"title":"> a","type":"container","items":[{"title":":hover","type":"container","items":[],"selectorType":"pseudo","formDefinition":[{"formKey":"font","children":[{"formKey":"font-and-color","breakpoints":[{"name":"xs"}],"activeFields":[{"name":"font-family","active":false},{"name":"font-weight","active":false},{"name":"color","active":true}]}]}],"uuid":"da26adb5-6be9-4550-9fc0-b40fa3a8d772"},{"title":":after","type":"container","items":[],"selectorType":"pseudo","formDefinition":[{"formKey":"layout","children":[{"formKey":"position","breakpoints":[{"name":"md"},{"name":"xs"}],"activeFields":[{"name":"position","active":true},{"name":"top","active":true},{"name":"bottom","active":true},{"name":"left","active":true},{"name":"right","active":true},{"name":"z-index","active":true}]},{"formKey":"height","breakpoints":[{"name":"md"},{"name":"xs"}],"activeFields":[{"name":"min-height","active":false},{"name":"max-height","active":false},{"name":"height","active":true}]},{"formKey":"width","breakpoints":[{"name":"md"},{"name":"xs"}],"activeFields":[{"name":"min-width","active":false},{"name":"max-width","active":false},{"name":"width","active":true}]}]},{"formKey":"content","children":[{"formKey":"icon","breakpoints":[{"name":"xs"}],"activeFields":[{"name":"contentIcon","active":true}]},{"formKey":"strings-counters-quotes-urls-and-attributes","breakpoints":[{"name":"md"}],"activeFields":[{"name":"contentType","active":true},{"name":"contentString","active":true},{"name":"counterString","active":true},{"name":"customString","active":true}]}]},{"formKey":"font","children":[{"formKey":"font-sizing-and-alignment","breakpoints":[{"name":"md"},{"name":"xs"}],"activeFields":[{"name":"font-size","active":false},{"name":"line-height","active":false},{"name":"text-align","active":true},{"name":"letter-spacing","active":false},{"name":"word-spacing","active":false},{"name":"text-indent","active":false}]}]}],"uuid":"45a91c86-673b-47f5-ac1f-b79608aeb289"}],"selectorType":"child","model":"> a","originalLabel":"Child selector","formDefinition":[{"formKey":"layout","children":[{"formKey":"position","breakpoints":[{"name":"xs"}],"activeFields":[{"name":"position","active":true},{"name":"top","active":true},{"name":"bottom","active":true},{"name":"left","active":true},{"name":"right","active":true},{"name":"z-index","active":true}]},{"formKey":"margin","breakpoints":[{"name":"md"},{"name":"xs"}],"activeFields":[{"name":"margin-equal","active":false},{"name":"margin-top","active":false},{"name":"margin-bottom","active":false},{"name":"margin-left","active":false},{"name":"margin-right","active":true}]},{"formKey":"width","breakpoints":[{"name":"md"},{"name":"xs"}],"activeFields":[{"name":"min-width","active":false},{"name":"max-width","active":false},{"name":"width","active":true}]},{"formKey":"padding","breakpoints":[{"name":"xs"}],"activeFields":[{"name":"padding-equal","active":false},{"name":"padding-top","active":true},{"name":"padding-bottom","active":true},{"name":"padding-left","active":false},{"name":"padding-right","active":false}]}]},{"formKey":"transform-and-transition","children":[{"formKey":"transition","breakpoints":[{"name":"xs"}],"activeFields":[{"name":"transitions","active":true},{"name":"transitionProperty","active":true},{"name":"transitionCustomProperty","active":true},{"name":"transitionDuration","active":true},{"name":"transitionTimingFunction","active":true},{"name":"transitionDelay","active":false}]}]},{"formKey":"font","children":[{"formKey":"font-and-color","breakpoints":[{"name":"xs"}],"activeFields":[{"name":"font-family","active":false},{"name":"font-weight","active":false},{"name":"color","active":true}]}]}],"collapsed":false,"uuid":"7230311e-8cb9-4eeb-9617-6aeafca998c4"},{"title":".is-expanded","type":"container","items":[{"title":"> a","type":"container","items":[{"title":":after","type":"container","items":[],"selectorType":"pseudo","formDefinition":[{"formKey":"content","children":[{"formKey":"icon","breakpoints":[{"name":"xs"}],"activeFields":[{"name":"contentIcon","active":true}]},{"formKey":"strings-counters-quotes-urls-and-attributes","breakpoints":[{"name":"md"}],"activeFields":[{"name":"contentType","active":true},{"name":"contentString","active":true},{"name":"counterString","active":true},{"name":"customString","active":true}]}]}],"uuid":"ab3482ba-1bf1-4b8f-b613-1f2591dbce3c"}],"selectorType":"child","model":"> a","originalLabel":"Child selector","formDefinition":[],"uuid":"0d5de469-322b-4395-914c-06d51bb38df9"}],"selectorType":"modifier","model":".is-expanded","originalLabel":"Modifier","formDefinition":[],"collapsed":false,"uuid":"723c1640-82c7-4b73-88be-1df1c95a3181"},{"title":".is-collapsed","type":"container","items":[{"title":"> a","type":"container","items":[{"title":":after","type":"container","items":[],"selectorType":"pseudo","formDefinition":[{"formKey":"content","children":[{"formKey":"icon","breakpoints":[{"name":"xs"}],"activeFields":[{"name":"contentIcon","active":true}]},{"formKey":"strings-counters-quotes-urls-and-attributes","breakpoints":[{"name":"md"}],"activeFields":[{"name":"contentType","active":true},{"name":"contentString","active":true},{"name":"counterString","active":true},{"name":"customString","active":true}]}]}],"uuid":"a66c5ff0-84d9-4962-a272-331ca3f9a354"}],"selectorType":"child","model":"> a","originalLabel":"Child selector","formDefinition":[],"uuid":"d96a77d9-600f-4a78-a1f5-963132a939e7"}],"selectorType":"modifier","model":".is-collapsed","originalLabel":"Modifier","formDefinition":[],"collapsed":false,"uuid":"1fdf0aba-4390-4758-a6ef-b4c755dbdec3"}],"selectorType":"child","model":"> li","originalLabel":"Child selector","formDefinition":[{"formKey":"layout","children":[{"formKey":"width","breakpoints":[{"name":"md"},{"name":"xs"}],"activeFields":[{"name":"min-width","active":false},{"name":"max-width","active":false},{"name":"width","active":true}]},{"formKey":"position","breakpoints":[{"name":"xs"}],"activeFields":[{"name":"position","active":true},{"name":"top","active":true},{"name":"bottom","active":true},{"name":"left","active":true},{"name":"right","active":true},{"name":"z-index","active":true}]},{"formKey":"margin","breakpoints":[{"name":"xs"}],"activeFields":[{"name":"margin-equal","active":false},{"name":"margin-top","active":false},{"name":"margin-bottom","active":true},{"name":"margin-left","active":false},{"name":"margin-right","active":false}]}]},{"formKey":"list-style","children":[{"formKey":"unordered-list","breakpoints":[{"name":"xs"}],"activeFields":[{"name":"list-style-type","active":true},{"name":"list-style-image","active":true},{"name":"list-style-position","active":false}]}]}],"collapsed":false,"uuid":"a90eccbd-70ba-4c8b-b298-2624345435ce"}],"selectorType":"child","model":".menu-level-1-ul","originalLabel":"Child selector","formDefinition":[{"formKey":"layout","children":[{"formKey":"flex-container","breakpoints":[{"name":"md"},{"name":"xs"}],"activeFields":[{"name":"flex-direction","active":true},{"name":"flex-wrap","active":false},{"name":"justify-content","active":false},{"name":"justify-content-safety","active":true},{"name":"align-content","active":false},{"name":"align-content-safety","active":true},{"name":"align-items","active":false},{"name":"align-items-safety","active":true}]},{"formKey":"width","breakpoints":[{"name":"md"},{"name":"xs"}],"activeFields":[{"name":"min-width","active":false},{"name":"max-width","active":false},{"name":"width","active":true}]},{"formKey":"display","breakpoints":[{"name":"xs"}],"activeFields":[{"name":"display","active":true},{"name":"visibility","active":false},{"name":"overflow","active":false},{"name":"overflow-x","active":false},{"name":"overflow-y","active":false}]}]}],"collapsed":false,"uuid":"3fd28277-b57f-4f6b-be5a-60a79e3ea56f"},{"title":".menu-level-2-ul","type":"container","items":[{"title":"> li","type":"container","items":[{"title":"> a","type":"container","items":[{"title":":hover","type":"container","items":[],"selectorType":"pseudo","formDefinition":[{"formKey":"font","children":[{"formKey":"font-and-color","breakpoints":[{"name":"xs"}],"activeFields":[{"name":"font-family","active":false},{"name":"font-weight","active":false},{"name":"color","active":true}]}]}],"uuid":"2cb79faa-87e3-4c75-afae-503517ae766b"}],"selectorType":"child","model":"> a","originalLabel":"Child selector","formDefinition":[{"formKey":"layout","children":[{"formKey":"display","breakpoints":[{"name":"xs"}],"activeFields":[{"name":"display","active":true},{"name":"visibility","active":false},{"name":"overflow","active":false},{"name":"overflow-x","active":false},{"name":"overflow-y","active":false}]},{"formKey":"padding","breakpoints":[{"name":"xs"}],"activeFields":[{"name":"padding-equal","active":false},{"name":"padding-top","active":true},{"name":"padding-bottom","active":true},{"name":"padding-left","active":false},{"name":"padding-right","active":false}]}]},{"formKey":"transform-and-transition","children":[{"formKey":"transition","breakpoints":[{"name":"xs"}],"activeFields":[{"name":"transitions","active":true},{"name":"transitionProperty","active":true},{"name":"transitionCustomProperty","active":true},{"name":"transitionDuration","active":true},{"name":"transitionTimingFunction","active":true},{"name":"transitionDelay","active":false}]}]},{"formKey":"font","children":[{"formKey":"font-and-color","breakpoints":[{"name":"xs"}],"activeFields":[{"name":"font-family","active":false},{"name":"font-weight","active":false},{"name":"color","active":true}]}]}],"uuid":"19c350d7-4cdb-472b-b351-bc024d81b64e"}],"selectorType":"child","model":"> li","originalLabel":"Child selector","formDefinition":[{"formKey":"list-style","children":[{"formKey":"unordered-list","breakpoints":[{"name":"xs"}],"activeFields":[{"name":"list-style-type","active":true},{"name":"list-style-image","active":true},{"name":"list-style-position","active":false}]}]},{"formKey":"layout","children":[{"formKey":"margin","breakpoints":[{"name":"md"},{"name":"xs"}],"activeFields":[{"name":"margin-equal","active":false},{"name":"margin-top","active":false},{"name":"margin-bottom","active":false},{"name":"margin-left","active":true},{"name":"margin-right","active":false}]}]}],"collapsed":false,"uuid":"946757f3-bee4-4457-bb1e-7ef38e8921da"}],"selectorType":"child","model":".menu-level-2-ul","originalLabel":"Child selector","formDefinition":[{"formKey":"layout","children":[{"formKey":"width","breakpoints":[{"name":"md"},{"name":"xs"}],"activeFields":[{"name":"min-width","active":false},{"name":"max-width","active":false},{"name":"width","active":true}]},{"formKey":"position","breakpoints":[{"name":"md"},{"name":"xs"}],"activeFields":[{"name":"position","active":true},{"name":"top","active":true},{"name":"bottom","active":true},{"name":"left","active":true},{"name":"right","active":true},{"name":"z-index","active":true}]},{"formKey":"display","breakpoints":[{"name":"xs"}],"activeFields":[{"name":"display","active":true},{"name":"visibility","active":false},{"name":"overflow","active":false},{"name":"overflow-x","active":false},{"name":"overflow-y","active":false}]},{"formKey":"margin","breakpoints":[{"name":"xs"}],"activeFields":[{"name":"margin-equal","active":false},{"name":"margin-top","active":true},{"name":"margin-bottom","active":true},{"name":"margin-left","active":false},{"name":"margin-right","active":false}]},{"formKey":"padding","breakpoints":[{"name":"md"},{"name":"xs"}],"activeFields":[{"name":"padding-equal","active":true},{"name":"padding-top","active":false},{"name":"padding-bottom","active":false},{"name":"padding-left","active":false},{"name":"padding-right","active":false}]}]},{"formKey":"background","children":[{"formKey":"background-color","breakpoints":[{"name":"md"},{"name":"xs"}],"activeFields":[{"name":"background-color","active":true}]}]}],"collapsed":false,"uuid":"8bf25375-2870-41a5-aa77-396839bc8151"}],"formDefinition":[],"selectorType":"topLevel","form":null}},"4bc246a9-e9e3-40a5-b0d4-630557d97367":{"settings":{"selectorType":"topLevel","formDefinition":[{"formKey":"menu-list-container-settings","children":[{"formKey":"menu-list-container-style","breakpoints":[],"activeFields":[{"name":"customStyle","active":true}]}]}],"form":null},"styles":{"items":[],"formDefinition":[],"selectorType":"topLevel","form":null},"markup":{"title":"Markup","selectorType":"topLevel","formDefinition":[{"formKey":"tab-markup-classes-and-ids","children":[{"formKey":"tab-markup-add-classes","breakpoints":[],"activeFields":[{"name":"classes","active":true}]}]}],"form":null}},"848a6204-d6c1-499c-abca-5aaa0cb89827":{"settings":{"selectorType":"topLevel","formDefinition":[{"formKey":"menu-list-item-settings","children":[{"formKey":"menu-list-item-range","breakpoints":[],"activeFields":[{"name":"range","active":true}]},{"formKey":"menu-list-item-child-list-visibility","breakpoints":[{"name":"xs"}],"activeFields":[{"name":"visibility","active":true}]},{"formKey":"menu-list-item-style","breakpoints":[],"activeFields":[{"name":"customStyle","active":true}]}]}],"form":null}},"cf9edd3d-4685-4ac6-a306-a15da872c2c5":{"settings":{"selectorType":"topLevel","formDefinition":[{"formKey":"menu-list-container-settings","children":[{"formKey":"menu-list-container-style","breakpoints":[],"activeFields":[{"name":"customStyle","active":true}]}]}],"form":null},"markup":{"title":"Markup","selectorType":"topLevel","formDefinition":[{"formKey":"tab-markup-classes-and-ids","children":[{"formKey":"tab-markup-add-classes","breakpoints":[],"activeFields":[{"name":"classes","active":true}]}]}],"form":null}},"e09da9c5-52b9-46f5-895a-b48df0fe3e6c":{"settings":{"selectorType":"topLevel","formDefinition":[{"formKey":"menu-list-item-settings","children":[{"formKey":"menu-list-item-range","breakpoints":[],"activeFields":[{"name":"range","active":true}]},{"formKey":"menu-list-item-child-list-visibility","breakpoints":[{"name":"xs"}],"activeFields":[{"name":"visibility","active":true}]},{"formKey":"menu-list-item-style","breakpoints":[],"activeFields":[{"name":"customStyle","active":true}]}]}],"form":null}},"d9328d62-7398-4cbe-9e88-e10801276ffd":{"settings":{"selectorType":"topLevel","formDefinition":[{"formKey":"menu-link-settings","children":[{"formKey":"menu-link-interaction","breakpoints":[{"name":"xs"}],"activeFields":[{"name":"link_interaction","active":true},{"name":"animationType","active":true},{"name":"animationTarget","active":true},{"name":"animationScale","active":true},{"name":"animationDirection","active":true},{"name":"animationDirection","active":true},{"name":"animationDistance","active":true},{"name":"animationOrigin","active":true},{"name":"animationFoldHeight","active":true},{"name":"animationHorizontalFirst","active":true},{"name":"animationIterations","active":true},{"name":"animationEasing","active":true},{"name":"animationDuration","active":true}]},{"formKey":"menu-link-style","breakpoints":[],"activeFields":[{"name":"customStyle","active":true}]}]}],"form":null},"styles":{"items":[],"formDefinition":[],"selectorType":"topLevel","form":null}},"64c3364a-07a9-493b-b9ed-c12e2d3ec9b1":{"settings":{"selectorType":"topLevel","formDefinition":[{"formKey":"menu-button-settings","children":[{"formKey":"menu-button-interaction","breakpoints":[{"name":"xs"}],"activeFields":[{"name":"button_interaction","active":true},{"name":"animationType","active":true},{"name":"animationTarget","active":true},{"name":"animationScale","active":true},{"name":"animationDirection","active":true},{"name":"animationDirection","active":true},{"name":"animationDistance","active":true},{"name":"animationOrigin","active":true},{"name":"animationFoldHeight","active":true},{"name":"animationHorizontalFirst","active":true},{"name":"animationIterations","active":true},{"name":"animationEasing","active":true},{"name":"animationDuration","active":true}]},{"formKey":"menu-button-style","breakpoints":[],"activeFields":[{"name":"customStyle","active":true}]}]}],"form":null},"styles":{"items":[{"title":":after","type":"container","items":[],"selectorType":"pseudo","formDefinition":[{"formKey":"content","children":[{"formKey":"strings-counters-quotes-urls-and-attributes","breakpoints":[{"name":"xs"}],"activeFields":[{"name":"contentType","active":true},{"name":"contentString","active":true},{"name":"counterString","active":true},{"name":"customString","active":true}]}]}],"uuid":"f391f50c-e2a5-448e-878c-79b9d0bf5311"}],"formDefinition":[{"formKey":"layout","children":[{"formKey":"display","breakpoints":[{"name":"xs"},{"name":"md"}],"activeFields":[{"name":"display","active":true},{"name":"visibility","active":true},{"name":"overflow","active":true},{"name":"overflow-x","active":true},{"name":"overflow-y","active":true}]}]}],"selectorType":"topLevel","form":null}},"86840b41-c130-418f-a53f-2bedd5e76358":{"settings":{"selectorType":"topLevel","formDefinition":[{"formKey":"menu-link-settings","children":[{"formKey":"menu-link-interaction","breakpoints":[{"name":"md"},{"name":"xs"}],"activeFields":[{"name":"link_interaction","active":true},{"name":"animationType","active":true},{"name":"animationTarget","active":true},{"name":"animationScale","active":true},{"name":"animationDirection","active":true},{"name":"animationDirection","active":true},{"name":"animationDistance","active":true},{"name":"animationOrigin","active":true},{"name":"animationFoldHeight","active":true},{"name":"animationHorizontalFirst","active":true},{"name":"animationIterations","active":true},{"name":"animationEasing","active":true},{"name":"animationDuration","active":true}]},{"formKey":"menu-link-style","breakpoints":[],"activeFields":[{"name":"customStyle","active":true}]}]}],"form":null},"styles":{"items":[],"formDefinition":[],"selectorType":"topLevel","form":null}}},"model":{"413af327-f715-4816-9a1c-766df8d86ae5":{"settings":{"width":"fluid","title":"<nav> element","customStyle":[{"customStyle":""}],"htmlMarkup":"nav"},"context-visibility":{"contextVisibility":{"condition":"ALL"}},"styles":{"settings":{"element":"container"},"styles":{"xl":{"display":{},"visibility":{},"overflow":{},"overflow-x":{},"overflow-y":{},"flex-container":{"flex-direction":{},"flex-wrap":{},"justify-content":{},"align-content":{},"align-items":{}},"min-width":{},"max-width":{},"width":{},"border-width":{},"border-top-width":{},"border-bottom-width":{},"border-left-width":{},"border-right-width":{},"border-style":{},"border-top-style":{},"border-bottom-style":{},"border-left-style":{},"border-right-style":{},"border-color":{},"border-top-color":{},"border-bottom-color":{},"border-left-color":{},"border-right-color":{},"min-height":{},"max-height":{},"height":{},"flex-item":{"flex-basis":{},"order":{},"flex-grow":{},"flex-shrink":{},"align-self":{}},"padding":{"padding-equal":{},"padding-top":{},"padding-bottom":{},"padding-left":{},"padding-right":{}},"margin":{"margin-equal":{},"margin-top":{},"margin-bottom":{},"margin-left":{},"margin-right":{}},"background-color":{}},"sm":{"min-height":{},"max-height":{},"height":{},"flex-item":{"flex-basis":{},"order":{},"flex-grow":{},"flex-shrink":{},"align-self":{}},"margin":{"margin-equal":{},"margin-top":{},"margin-bottom":{},"margin-left":{},"margin-right":{}},"overflow":{}}},"da26adb5-6be9-4550-9fc0-b40fa3a8d772":{"settings":{"element":"","class":"","combinator":"","pseudo":":hover"},"styles":{"xl":{"font-family":{},"font-weight":{},"color":{}},"xs":{"color":{"value":{"value":{"hex":"#d83269","rgba":"rgba(216, 50, 105, 1)"},"name":"Color 4","uid":"color-4","class":".coh-color-color-4","variable":"$coh-color-color-4","wysiwyg":true,"inuse":true}}}}},"45a91c86-673b-47f5-ac1f-b79608aeb289":{"settings":{"element":"","class":"","combinator":"","pseudo":":after"},"styles":{"xl":{"position":{},"top":{},"bottom":{},"left":{},"right":{},"z-index":{},"background-color":{},"min-height":{},"max-height":{},"height":{},"min-width":{},"max-width":{},"width":{},"transform":{"transformRotateX":{},"transformRotateY":{},"transformRotateZ":{},"transformTranslateX":{},"transformTranslateY":{},"transformScaleX":{},"transformScaleY":{},"transformSkewX":{},"transformSkewY":{},"transformOriginX":{},"transformOriginY":{}},"content-string":{"contentType":{},"contentString":{}},"flex-item":{"flex-basis":{},"order":{},"flex-grow":{},"flex-shrink":{},"align-self":{}},"content-icon":{"contentIcon":{}},"font-size":{},"line-height":{},"text-align":{},"letter-spacing":{},"word-spacing":{},"text-indent":{},"padding":{"padding-equal":{},"padding-top":{},"padding-bottom":{},"padding-left":{},"padding-right":{}},"margin":{"margin-equal":{},"margin-top":{},"margin-bottom":{},"margin-left":{},"margin-right":{}}},"sm":{"min-width":{},"max-width":{},"width":{},"content-icon":{"contentIcon":{}},"position":{},"top":{},"bottom":{},"left":{},"right":{},"z-index":{},"min-height":{},"max-height":{},"height":{},"font-size":{},"line-height":{},"text-align":{},"letter-spacing":{},"word-spacing":{},"text-indent":{},"transform":{"transformRotateX":{},"transformRotateY":{},"transformRotateZ":{},"transformTranslateX":{},"transformTranslateY":{},"transformScaleX":{},"transformScaleY":{},"transformSkewX":{},"transformSkewY":{},"transformOriginX":{},"transformOriginY":{}},"padding":{"padding-equal":{},"padding-top":{},"padding-bottom":{},"padding-left":{},"padding-right":{}},"margin":{"margin-equal":{},"margin-top":{},"margin-bottom":{},"margin-left":{},"margin-right":{}}},"xs":{"text-align":{"value":"center"},"height":{"value":"16"},"width":{"value":"16"},"position":{"value":"absolute"},"top":{"value":"auto"},"bottom":{"value":"auto"},"left":{"value":"auto"},"right":{"value":"0"},"z-index":{},"content-icon":{"contentIcon":{"value":{"fontFamily":"icomoon","iconName":"61524"}}},"content-string":{"contentType":{}}},"md":{"text-align":{"value":"left"},"height":{"value":"unset"},"width":{"value":"unset"},"position":{"value":"static"},"top":{},"bottom":{},"left":{},"right":{},"z-index":{},"content-icon":{"contentIcon":{}},"content-string":{"contentType":{"value":"none"}}}}},"7230311e-8cb9-4eeb-9617-6aeafca998c4":{"settings":{"element":"> a","class":"","combinator":"","pseudo":""},"styles":{"xl":{"font-family":{},"font-weight":{},"color":{},"font-size":{},"line-height":{},"text-align":{},"letter-spacing":{},"word-spacing":{},"text-indent":{},"font-style":{},"text-transform":{},"text-decoration":{},"word-wrap":{},"direction":{},"position":{},"top":{},"bottom":{},"left":{},"right":{},"z-index":{},"min-width":{},"max-width":{},"width":{},"min-height":{},"max-height":{},"height":{},"padding":{"padding-equal":{},"padding-top":{},"padding-bottom":{},"padding-left":{},"padding-right":{}},"margin":{"margin-equal":{},"margin-top":{},"margin-bottom":{},"margin-left":{},"margin-right":{}},"background-color":{}},"sm":{"font-size":{},"line-height":{},"text-align":{},"letter-spacing":{},"word-spacing":{},"text-indent":{},"min-width":{},"max-width":{},"width":{},"padding":{"padding-equal":{},"padding-top":{},"padding-bottom":{},"padding-left":{},"padding-right":{}},"margin":{"margin-equal":{},"margin-top":{},"margin-bottom":{},"margin-left":{},"margin-right":{}},"min-height":{},"max-height":{},"height":{}},"md":{"font-size":{},"line-height":{},"text-align":{},"letter-spacing":{},"word-spacing":{},"text-indent":{},"width":{"value":"auto"},"margin":{"margin-right":{"value":"32"}}},"xs":{"color":{"value":{"value":{"hex":"#28a9e0","rgba":"rgba(40, 169, 224, 1)"},"name":"Color 1","uid":"color-1","class":".coh-color-color-1","variable":"$coh-color-color-1","wysiwyg":true,"inuse":true}},"width":{"value":"100%"},"padding":{"padding-top":{"value":"16"},"padding-bottom":{"value":"16"}},"margin":{"margin-right":{"value":"0"}},"position":{"value":"relative"},"top":{},"bottom":{},"left":{},"right":{},"z-index":{},"transitions":[{"transitionProperty":{"value":"color"},"transitionDuration":{"value":300},"transitionTimingFunction":{"value":"ease-in-out"}}]}}},"ab3482ba-1bf1-4b8f-b613-1f2591dbce3c":{"settings":{"element":"","class":"","combinator":"","pseudo":":after"},"styles":{"xl":{"content-icon":{"contentIcon":{}}},"sm":{"content-icon":{"contentIcon":{}}},"xs":{"content-icon":{"contentIcon":{"value":{"fontFamily":"icomoon","iconName":"61544"}}},"content-string":{"contentType":{}}},"md":{"content-string":{"contentType":{"value":"none"}}}}},"0d5de469-322b-4395-914c-06d51bb38df9":{"settings":{"element":"> a","class":"","combinator":"","pseudo":""},"styles":{}},"723c1640-82c7-4b73-88be-1df1c95a3181":{"settings":{"element":"","class":".is-expanded","combinator":"","pseudo":""},"styles":{}},"a66c5ff0-84d9-4962-a272-331ca3f9a354":{"settings":{"element":"","class":"","combinator":"","pseudo":":after"},"styles":{"xl":{"content-icon":{"contentIcon":{}}},"sm":{"content-icon":{"contentIcon":{}}},"xs":{"content-icon":{"contentIcon":{"value":{"fontFamily":"icomoon","iconName":"61543"}}},"content-string":{"contentType":{}}},"md":{"content-string":{"contentType":{"value":"none"}}}}},"d96a77d9-600f-4a78-a1f5-963132a939e7":{"settings":{"element":"> a","class":"","combinator":"","pseudo":""},"styles":{}},"1fdf0aba-4390-4758-a6ef-b4c755dbdec3":{"settings":{"element":"","class":".is-collapsed","combinator":"","pseudo":""},"styles":{}},"a90eccbd-70ba-4c8b-b298-2624345435ce":{"settings":{"element":"> li","class":"","combinator":"","pseudo":""},"styles":{"xl":{"flex-container":{"flex-direction":{},"flex-wrap":{},"justify-content":{},"align-content":{},"align-items":{}},"min-width":{},"max-width":{},"width":{},"position":{},"top":{},"bottom":{},"left":{},"right":{},"z-index":{},"margin":{"margin-equal":{},"margin-top":{},"margin-bottom":{},"margin-left":{},"margin-right":{}},"unordered-list":{"list-style-type":{},"list-style-position":{}},"min-height":{},"max-height":{},"height":{},"background-color":{}},"sm":{"min-width":{},"max-width":{},"width":{},"min-height":{},"max-height":{},"height":{}},"xs":{"width":{"value":"100%"},"margin":{"margin-bottom":{"value":"0"}},"position":{"value":"relative"},"top":{},"bottom":{},"left":{},"right":{},"z-index":{},"unordered-list":{"list-style-type":{"value":"none"}}},"md":{"width":{"value":"auto"}}}},"3fd28277-b57f-4f6b-be5a-60a79e3ea56f":{"settings":{"element":".menu-level-1-ul","class":"","combinator":"","pseudo":""},"styles":{"xl":{"flex-container":{"flex-direction":{},"flex-wrap":{},"justify-content":{},"align-content":{},"align-items":{}},"display":{},"visibility":{},"overflow":{},"overflow-x":{},"overflow-y":{},"min-width":{},"max-width":{},"width":{},"border-width":{},"border-top-width":{},"border-bottom-width":{},"border-left-width":{},"border-right-width":{},"border-style":{},"border-top-style":{},"border-bottom-style":{},"border-left-style":{},"border-right-style":{},"border-color":{},"border-top-color":{},"border-bottom-color":{},"border-left-color":{},"border-right-color":{},"unordered-list":{"list-style-type":{},"list-style-position":{}},"position":{},"top":{},"bottom":{},"left":{},"right":{},"z-index":{},"margin":{"margin-top":{},"margin-bottom":{},"margin-left":{},"margin-right":{}},"min-height":{},"max-height":{},"height":{}},"sm":{"flex-container":{"flex-direction":{},"flex-wrap":{},"justify-content":{},"align-content":{},"align-items":{}},"min-width":{},"max-width":{},"width":{},"border-style":{},"border-top-style":{},"border-bottom-style":{},"border-left-style":{},"border-right-style":{},"min-height":{},"max-height":{},"height":{}},"xs":{"width":{"value":"100%"},"display":{"value":"flex"},"flex-container":{"flex-direction":{"value":"column"}}},"md":{"width":{"value":"auto"},"flex-container":{"flex-direction":{"value":"row"}}}}},"2cb79faa-87e3-4c75-afae-503517ae766b":{"settings":{"element":"","class":"","combinator":"","pseudo":":hover"},"styles":{"xl":{"font-family":{},"font-weight":{},"color":{}},"sm":{"font-family":{},"font-weight":{},"color":{}},"xs":{"color":{"value":{"value":{"hex":"#d83269","rgba":"rgba(216, 50, 105, 1)"},"name":"Color 4","uid":"color-4","class":".coh-color-color-4","variable":"$coh-color-color-4","wysiwyg":true,"inuse":true}}}}},"19c350d7-4cdb-472b-b351-bc024d81b64e":{"settings":{"element":"> a","class":"","combinator":"","pseudo":""},"styles":{"xl":{"font-family":{},"font-weight":{},"color":{},"font-size":{},"line-height":{},"text-align":{},"letter-spacing":{},"word-spacing":{},"text-indent":{},"padding":{"padding-equal":{},"padding-top":{},"padding-bottom":{},"padding-left":{},"padding-right":{}},"margin":{"margin-equal":{},"margin-top":{},"margin-bottom":{},"margin-left":{},"margin-right":{}},"display":{},"visibility":{},"overflow":{},"overflow-x":{},"overflow-y":{}},"md":{"font-size":{},"line-height":{},"text-align":{},"letter-spacing":{},"word-spacing":{},"text-indent":{}},"sm":{"padding":{"padding-equal":{},"padding-top":{},"padding-bottom":{},"padding-left":{},"padding-right":{}},"margin":{"margin-equal":{},"margin-top":{},"margin-bottom":{},"margin-left":{},"margin-right":{}},"color":{}},"xs":{"color":{"value":{"value":{"hex":"#28a9e0","rgba":"rgba(40, 169, 224, 1)"},"name":"Color 1","uid":"color-1","class":".coh-color-color-1","variable":"$coh-color-color-1","wysiwyg":true,"inuse":true}},"padding":{"padding-top":{"value":"8"},"padding-bottom":{"value":"8"}},"display":{"value":"block"},"transitions":[{"transitionProperty":{"value":"all"},"transitionDuration":{"value":200},"transitionTimingFunction":{"value":"ease-in-out"}}]}}},"946757f3-bee4-4457-bb1e-7ef38e8921da":{"settings":{"element":"> li","class":"","combinator":"","pseudo":""},"styles":{"xl":{"margin":{"margin-equal":{},"margin-top":{},"margin-bottom":{},"margin-left":{},"margin-right":{}},"unordered-list":{"list-style-type":{},"list-style-position":{}}},"sm":{"margin":{"margin-equal":{},"margin-top":{},"margin-bottom":{},"margin-left":{},"margin-right":{}}},"xs":{"margin":{"margin-left":{"value":"16"}},"unordered-list":{"list-style-type":{"value":"none"}}},"md":{"margin":{"margin-left":{"value":"0"}}}}},"8bf25375-2870-41a5-aa77-396839bc8151":{"settings":{"element":".menu-level-2-ul","class":"","combinator":"","pseudo":""},"styles":{"xl":{"min-width":{},"max-width":{},"width":{},"background-color":{},"position":{},"top":{},"bottom":{},"left":{},"right":{},"z-index":{},"opacity":{},"display":{},"visibility":{},"overflow":{},"overflow-x":{},"overflow-y":{},"padding":{"padding-equal":{},"padding-top":{},"padding-bottom":{},"padding-left":{},"padding-right":{}},"margin":{"margin-top":{},"margin-bottom":{},"margin-left":{},"margin-right":{}},"flex-container":{"flex-direction":{"value":"row"}},"unordered-list":{"list-style-type":{"value":"none"}}},"sm":{"background-color":{},"min-width":{},"max-width":{},"width":{},"position":{},"top":{},"bottom":{},"left":{},"right":{},"z-index":{},"flex-container":{"flex-direction":{"value":"column"}},"padding":{"padding-equal":{}}},"xs":{"background-color":{"value":{"value":{"hex":"transparent","rgba":"rgba(0, 0, 0, 0)"},"name":"DX8 transparent","wysiwyg":true,"uid":"dx8-transparent","class":".dx8-transparent","variable":"$coh-dx8-transparent","inuse":true}},"width":{"value":"auto"},"padding":{"padding-equal":{"value":"0"}},"margin":{"margin-top":{"value":"0"},"margin-bottom":{"value":"0"}},"position":{"value":"static"},"top":{},"bottom":{},"left":{},"right":{},"z-index":{},"display":{"value":"none"}},"md":{"background-color":{"value":{"value":{"hex":"#f3f6f8","rgba":"rgba(243, 246, 248, 1)"},"name":"Light 1","uid":"light-1","class":".coh-color-light-1","variable":"$coh-color-light-1","wysiwyg":true,"inuse":true}},"width":{"value":"360"},"padding":{"padding-equal":{"value":"24"}},"position":{"value":"absolute"},"top":{"value":"100%"},"bottom":{},"left":{"value":"0"},"right":{},"z-index":{}}}}},"isVariableMode":false},"4bc246a9-e9e3-40a5-b0d4-630557d97367":{"context-visibility":{"contextVisibility":{"condition":"ALL"}},"styles":{"settings":{"element":"menu-list-container"},"styles":{"xl":{"border-width":{},"border-top-width":{},"border-bottom-width":{},"border-left-width":{},"border-right-width":{},"border-radius":{},"border-top-left-radius":{},"border-top-right-radius":{},"border-bottom-left-radius":{},"border-bottom-right-radius":{},"border-style":{},"border-top-style":{},"border-bottom-style":{},"border-left-style":{},"border-right-style":{},"border-color":{},"border-top-color":{},"border-bottom-color":{},"border-left-color":{},"border-right-color":{},"outline-width":{},"outline-offset":{},"outline-color":{},"outline-style":{},"unordered-list":{"list-style-type":{},"list-style-position":{}}},"sm":{"border-style":{},"border-top-style":{},"border-bottom-style":{},"border-left-style":{},"border-right-style":{}}}},"settings":{"title":"<ul> element - menu level 1"},"isVariableMode":false,"markup":{"classes":"menu-level-1-ul"}},"848a6204-d6c1-499c-abca-5aaa0cb89827":{"settings":{"visibility":"initially_hidden","title":"<li> element - menu list item 1","styles":{"xl":{},"xs":{"visibility":"hidden"}},"customStyle":""},"context-visibility":{"contextVisibility":{"condition":"ALL"}},"styles":{"settings":{"element":"menu-list-item"}},"isVariableMode":false},"86840b41-c130-418f-a53f-2bedd5e76358":{"settings":{"title":"<a> element - menu link 1","link_interaction":"toggle_on_hover","styles":{"xl":{},"sm":{},"xs":{"link_interaction":"click-through-to-link","animationScale":null,"animationOrigin":"top,center","animationHorizontalFirst":false},"md":{"link_interaction":"toggle-on-hover","animationScale":null,"animationOrigin":"top,center","animationHorizontalFirst":false,"animationType":"fade","animationEasing":"swing","animationTarget":".menu-level-2-ul","animationDuration":200}},"customStyle":""},"context-visibility":{"contextVisibility":{"condition":"ALL"}},"styles":{"settings":{"element":"menu-link"}},"isVariableMode":false},"64c3364a-07a9-493b-b9ed-c12e2d3ec9b1":{"settings":{"title":"Menu button","button_interaction":"toggle-on-click","styles":{"xs":{"button_interaction":"toggle-on-click","animationType":"blind","animationDirection":"up","animationEasing":"swing","animationTarget":".menu-level-2-ul"}},"customStyle":""},"context-visibility":{"contextVisibility":{"condition":"ALL"}},"styles":{"settings":{"element":"menu-button"},"styles":{"md":{"display":{"value":"none"}},"xs":{"display":{"value":"inline-block"}}},"f391f50c-e2a5-448e-878c-79b9d0bf5311":{"settings":{"element":"","class":"","combinator":"","pseudo":":after"},"styles":{"xs":{"content-string":{"contentType":{"value":"string"},"contentString":{"value":"Toggle"}}}}}}},"cf9edd3d-4685-4ac6-a306-a15da872c2c5":{"context-visibility":{"contextVisibility":{"condition":"ALL"}},"styles":{"settings":{"element":"menu-list-container"}},"settings":{"title":"<ul> element - menu level 2"},"isVariableMode":false,"markup":{"classes":"menu-level-2-ul"}},"e09da9c5-52b9-46f5-895a-b48df0fe3e6c":{"settings":{"visibility":"initially_hidden","title":"<li> element - menu list item 2","styles":{"xl":{},"xs":{"visibility":"visible"}},"customStyle":""},"context-visibility":{"contextVisibility":{"condition":"ALL"}},"styles":{"settings":{"element":"menu-list-item"}},"isVariableMode":false},"d9328d62-7398-4cbe-9e88-e10801276ffd":{"settings":{"link_interaction":"toggle_on_hover","title":"<a> element - menu link 2","styles":{"xl":{},"xs":{"link_interaction":"click-through-to-link","animationScale":null,"animationDirection":"up","animationOrigin":"top,center","animationHorizontalFirst":false,"animationEasing":"swing"}},"customStyle":""},"context-visibility":{"contextVisibility":{"condition":"ALL"}},"styles":{"settings":{"element":"menu-link"}},"isVariableMode":false}},"previewModel":{"86840b41-c130-418f-a53f-2bedd5e76358":{},"64c3364a-07a9-493b-b9ed-c12e2d3ec9b1":{}},"variableFields":{"86840b41-c130-418f-a53f-2bedd5e76358":[],"64c3364a-07a9-493b-b9ed-c12e2d3ec9b1":[]},"meta":{}}';

  /**
   * @covers \Drupal\cohesion\Plugin\EntityUpdate\_0029EntityUpdate::runUpdate
   */
  public function testRunUpdate() {

    // Test a custom style with undefined UUIDs.
    $style_1 = new _0029MockEntity($this->fixture_style_json_values, FALSE, $this->fixture_style_json_mapper);

    $this->assertionsStyleBefore($style_1->getDecodedJsonValues());
    $this->unit->runUpdate($style_1);
    $this->assertionsStyleAfter($style_1->getDecodedJsonValues());
    $this->unit->runUpdate($style_1);
    $this->assertionsStyleAfter($style_1->getDecodedJsonValues());

    // Test a custom style with some corrupt data.
    $style_2 = new _0029MockEntity($this->fixture_style_json_values_2, FALSE, $this->fixture_style_json_mapper_2);

    $this->assertionsStyleBefore2($style_2->getDecodedJsonValues());
    $this->unit->runUpdate($style_2);
    $this->assertionsStyleAfter2($style_2->getDecodedJsonValues());
    $this->unit->runUpdate($style_2);
    $this->assertionsStyleAfter2($style_2->getDecodedJsonValues());

    // Test a custom style with nested top level styles at breakpoints.
    $style_3 = new _0029MockEntity($this->fixture_style_json_values_3, FALSE, $this->fixture_style_json_mapper_3);

    $this->assertionsStyleBefore3($style_3->getDecodedJsonValues());
    $this->unit->runUpdate($style_3);
    $this->assertionsStyleAfter3($style_3->getDecodedJsonValues());
    $this->unit->runUpdate($style_3);
    $this->assertionsStyleAfter3($style_3->getDecodedJsonValues());

    // Test a component with some correct and some corrupt style data
    $component_1 = new _0029MockEntity($this->fixture_component_1, TRUE);

    $this->assertionsLayoutCanvasBeforeComponent1($component_1->getDecodedJsonValues());
    $this->unit->runUpdate($component_1);
    $this->assertionsLayoutCanvasAfterComponent1($component_1->getDecodedJsonValues());

    // Test a component with all corrupt style data
    $component_2 = new _0029MockEntity($this->fixture_component_2, TRUE);

    $this->assertionsLayoutCanvasBeforeComponent2($component_2->getDecodedJsonValues());
    $this->unit->runUpdate($component_2);
    $this->assertionsLayoutCanvasAfterComponent2($component_2->getDecodedJsonValues());

    // Test a component with some correct and some corrupt style data - nested styles.
    $component_3 = new _0029MockEntity($this->fixture_component_3, TRUE);

    $this->assertionsLayoutCanvasBeforeComponent3($component_3->getDecodedJsonValues());
    $this->unit->runUpdate($component_3);
    $this->assertionsLayoutCanvasAfterComponent3($component_3->getDecodedJsonValues());

    // Test a menu template with multi level nested styles - no corrupt data.
    $layout_canvas = new _0029MockEntity($this->fixture_layout_canvas, TRUE);

    $this->assertionsLayoutCanvasBeforeMenuTemplate($layout_canvas->getDecodedJsonValues());
    $this->unit->runUpdate($layout_canvas);
    $this->assertionsLayoutCanvasAfterMenuTemplate($layout_canvas->getDecodedJsonValues());

  }


  private function assertionsStyleBefore($json_values) {
    $this->assertArrayHasKey('a0c3956b-830f-4384-8aae-93f04e74f1bc', $json_values['styles']);
    $this->assertArrayHasKey('undefined', $json_values['styles']);
  }

  private function assertionsStyleAfter($json_values) {
    $this->assertArrayNotHasKey('a0c3956b-830f-4384-8aae-93f04e74f1bc', $json_values['styles']);
    $this->assertArrayNotHasKey('undefined', $json_values['styles']);
  }

  private function assertionsStyleBefore2($json_values) {
    $this->assertArrayHasKey('1d70a029-94d5-4108-b0da-dcee4775b30b', $json_values['styles']);
    $this->assertArrayHasKey('24014420-3756-48f7-be13-adf2adfa7678', $json_values['styles']);
    $this->assertArrayHasKey('d272bd21-d34a-41c1-b805-4036ff03c180', $json_values['styles']);
  }

  private function assertionsStyleAfter2($json_values) {
    $this->assertArrayNotHasKey('1d70a029-94d5-4108-b0da-dcee4775b30b', $json_values['styles']);
    $this->assertArrayNotHasKey('24014420-3756-48f7-be13-adf2adfa7678', $json_values['styles']);
    $this->assertArrayHasKey('d272bd21-d34a-41c1-b805-4036ff03c180', $json_values['styles']);
  }

  private function assertionsStyleBefore3($json_values) {
    $this->assertArrayHasKey('styles', $json_values['styles']);
  }

  private function assertionsStyleAfter3($json_values) {
    $this->assertArrayHasKey('styles', $json_values['styles']);
  }

  private function assertionsLayoutCanvasBeforeComponent1($json_values) {
    $uuids = [
      "45d29c62-0253-4702-8ace-a32369de70a3",
      "012fb06d-3b0c-401f-aba9-a0709ae38f7a",
      "d43c8387-9931-4e14-95bd-25771fc10411",
      "ff98dd47-3b83-4e9a-a9a2-104b3599210c",
      "d51bd913-88bd-4232-8278-a4765a3aaeae",
      "f091d9df-588d-4d23-a396-3a3beb118adc",
      "265c2c16-8de2-4b3a-a056-8c15b962822b",
      "42295fa3-4cdb-4f21-9656-13b3ce076a85",
      "11ea0f53-52d7-43e3-b095-ed876eaa2b91",
      "14e2553a-ae3e-44da-a735-4d5adf59797e",
      "df091257-f6d5-44d0-9efa-e44a54c9906e",
      "3a97aa47-ceac-4a7b-842c-ec0d29132cdc",
      "f0431431-f53e-4424-90a1-4582070af566",
      "a0afc35b-b841-4012-bf28-007e7cda26a6",
      "b8bb5a7a-f1bb-44f4-b3fb-530118dc4ac3"
    ];

    foreach($uuids as $uuid) {
      $this->assertArrayHasKey($uuid, $json_values['model']['f2a3508f-a9b7-4f33-99c3-734ad9559ce1']['styles']);
    }

  }

  private function assertionsLayoutCanvasAfterComponent1($json_values) {
    $uuids = [
      "45d29c62-0253-4702-8ace-a32369de70a3",
      "012fb06d-3b0c-401f-aba9-a0709ae38f7a",
      "d43c8387-9931-4e14-95bd-25771fc10411",
      "ff98dd47-3b83-4e9a-a9a2-104b3599210c",
      "d51bd913-88bd-4232-8278-a4765a3aaeae",
      "f091d9df-588d-4d23-a396-3a3beb118adc",
      "265c2c16-8de2-4b3a-a056-8c15b962822b",
      "42295fa3-4cdb-4f21-9656-13b3ce076a85",
      "11ea0f53-52d7-43e3-b095-ed876eaa2b91",
      "14e2553a-ae3e-44da-a735-4d5adf59797e",
      "df091257-f6d5-44d0-9efa-e44a54c9906e",
      "3a97aa47-ceac-4a7b-842c-ec0d29132cdc",
      "f0431431-f53e-4424-90a1-4582070af566",
      "a0afc35b-b841-4012-bf28-007e7cda26a6"
    ];

    foreach($uuids as $uuid) {
      $this->assertArrayNotHasKey($uuid, $json_values['model']['f2a3508f-a9b7-4f33-99c3-734ad9559ce1']['styles']);
    }

    // this uuuid has correct data so should not be deleted.
    $this->assertArrayHasKey('b8bb5a7a-f1bb-44f4-b3fb-530118dc4ac3', $json_values['model']['f2a3508f-a9b7-4f33-99c3-734ad9559ce1']['styles']);

  }

  private function assertionsLayoutCanvasBeforeComponent2($json_values) {
    $uuids = [
      "45d29c62-0253-4702-8ace-a32369de70a3",
      "012fb06d-3b0c-401f-aba9-a0709ae38f7a",
      "d43c8387-9931-4e14-95bd-25771fc10411",
      "ff98dd47-3b83-4e9a-a9a2-104b3599210c",
      "d51bd913-88bd-4232-8278-a4765a3aaeae",
      "f091d9df-588d-4d23-a396-3a3beb118adc",
      "265c2c16-8de2-4b3a-a056-8c15b962822b",
      "42295fa3-4cdb-4f21-9656-13b3ce076a85",
      "11ea0f53-52d7-43e3-b095-ed876eaa2b91",
      "14e2553a-ae3e-44da-a735-4d5adf59797e",
      "df091257-f6d5-44d0-9efa-e44a54c9906e",
      "3a97aa47-ceac-4a7b-842c-ec0d29132cdc",
      "f0431431-f53e-4424-90a1-4582070af566",
      "a0afc35b-b841-4012-bf28-007e7cda26a6"
    ];

    foreach($uuids as $uuid) {
      $this->assertArrayHasKey($uuid, $json_values['model']['f2a3508f-a9b7-4f33-99c3-734ad9559ce1']['styles']);
    }

  }

  private function assertionsLayoutCanvasAfterComponent2($json_values) {
    $uuids = [
      "45d29c62-0253-4702-8ace-a32369de70a3",
      "012fb06d-3b0c-401f-aba9-a0709ae38f7a",
      "d43c8387-9931-4e14-95bd-25771fc10411",
      "ff98dd47-3b83-4e9a-a9a2-104b3599210c",
      "d51bd913-88bd-4232-8278-a4765a3aaeae",
      "f091d9df-588d-4d23-a396-3a3beb118adc",
      "265c2c16-8de2-4b3a-a056-8c15b962822b",
      "42295fa3-4cdb-4f21-9656-13b3ce076a85",
      "11ea0f53-52d7-43e3-b095-ed876eaa2b91",
      "14e2553a-ae3e-44da-a735-4d5adf59797e",
      "df091257-f6d5-44d0-9efa-e44a54c9906e",
      "3a97aa47-ceac-4a7b-842c-ec0d29132cdc",
      "f0431431-f53e-4424-90a1-4582070af566",
      "a0afc35b-b841-4012-bf28-007e7cda26a6"
    ];

    // no data should be left.
    foreach($uuids as $uuid) {
      $this->assertArrayNotHasKey($uuid, $json_values['model']['f2a3508f-a9b7-4f33-99c3-734ad9559ce1']['styles']);
    }

  }

  private function assertionsLayoutCanvasBeforeComponent3($json_values) {
    $uuids = [
      "21733b1e-d256-4662-9408-d0b619c5b2b5",
      "6da32133-3799-48a1-9dcd-c485b417b2eb"
    ];

    foreach($uuids as $uuid) {
      $this->assertArrayHasKey($uuid, $json_values['model']['f2a3508f-a9b7-4f33-99c3-734ad9559ce1']['styles']);
    }

  }

  private function assertionsLayoutCanvasAfterComponent3($json_values) {
    // check this nested style is still in place.
    $this->assertArrayHasKey('21733b1e-d256-4662-9408-d0b619c5b2b5', $json_values['model']['f2a3508f-a9b7-4f33-99c3-734ad9559ce1']['styles']);
    // check this nested corrupt style has been deleted.
    $this->assertArrayNotHasKey('6da32133-3799-48a1-9dcd-c485b417b2eb', $json_values['model']['f2a3508f-a9b7-4f33-99c3-734ad9559ce1']['styles']);
  }

  private function assertionsLayoutCanvasBeforeMenuTemplate($json_values) {
    $this->assertArrayHasKey('f391f50c-e2a5-448e-878c-79b9d0bf5311', $json_values['model']['64c3364a-07a9-493b-b9ed-c12e2d3ec9b1']['styles']);
  }

  private function assertionsLayoutCanvasAfterMenuTemplate($json_values) {
    $this->assertArrayHasKey('f391f50c-e2a5-448e-878c-79b9d0bf5311', $json_values['model']['64c3364a-07a9-493b-b9ed-c12e2d3ec9b1']['styles']);
  }

}
