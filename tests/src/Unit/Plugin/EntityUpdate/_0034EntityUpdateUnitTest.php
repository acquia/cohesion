<?php

namespace Drupal\Tests\cohesion\Unit\Plugin\EntityUpdate;

use Drupal\cohesion\Entity\EntityJsonValuesInterface;
use Drupal\cohesion\Plugin\EntityUpdate\_0034EntityUpdate;

/**
 * Class MockUpdateEntity.
 *
 * @package Drupal\Tests\cohesion\Unit
 */
class _0034MockUpdateEntity extends EntityMockBase implements EntityJsonValuesInterface {
}

/**
 * @group Cohesion
 */
class _0034EntityUpdateUnitTest extends EntityUpdateUnitTestCase {


  protected $unit;

  /**
   * Layout json_value.
   *
   * @var string
   */
  private $fixture_layout_canvas = '{"canvas":[{"uid":"cpt_footer_social_and_copyright","type":"component","title":"Footer Social and Copyright Block","enabled":true,"category":"category-11","componentId":"cpt_footer_social_and_copyright","componentType":"container","parentUid":"root","uuid":"f34c1c44-068b-47bb-b93a-f1b16c3ec197","isContainer":0,"children":[]}],"mapper":{},"model":{"f34c1c44-068b-47bb-b93a-f1b16c3ec197":{"settings":{"title":"Footer Social and Copyright Block"},"42670858-4d72-4be5-ab5e-f2bb1b76d8e3":"https://www.facebook.com","faf48534-0172-40d2-a8c7-a3f1039042f7":"https://www.linkedin.com","e9c36f66-fe88-48eb-a105-39f13c67231e":"https://www.twitter.com"}},"previewModel":{"f34c1c44-068b-47bb-b93a-f1b16c3ec197":{}},"variableFields":{"f34c1c44-068b-47bb-b93a-f1b16c3ec197":[]},"meta":{"fieldHistory":[]}}';

  /**
   * Component json_value.
   *
   * @var string
   */
  private $fixture_component = '{"canvas":[{"type":"container","uid":"container","title":"Container","status":{"collapsed":false},"uuid":"9e7b8df1-1a07-441e-8077-015a8ea39a02","parentUid":"root","isContainer":true,"children":[{"type":"container","uid":"container","title":"Container","status":{"collapsed":false},"uuid":"c6646f02-36c4-49c7-8f27-69dd2c49a7e8","parentUid":"container","isContainer":true,"children":[]},{"type":"container","uid":"paragraph","title":"Paragraph","status":{"collapsed":false},"uuid":"15f03e0e-f352-45b2-92b9-82acb2dd17f7","parentUid":"container","isContainer":true,"children":[]},{"type":"container","uid":"list-container","title":"List container","status":{"collapsed":false},"uuid":"46c9c2ff-d8e8-4d99-87c4-7f312c935189","parentUid":"container","isContainer":true,"children":[{"type":"container","uid":"list-item","title":"List item","status":{"collapsed":false},"uuid":"2b8f8f00-0bfe-474b-b63f-36ec3d8a13a8","parentUid":"list-container","isContainer":true,"children":[{"type":"container","uid":"link","title":"Link","status":{"collapsed":true},"uuid":"96975e61-ae73-4c5a-933a-3f28c77163f9","parentUid":"list-item","isContainer":true,"children":[]}]},{"type":"container","uid":"paragraph","title":"Paragraph","status":{"collapsed":true},"parentIndex":1,"uuid":"placeholder-368c8430-585d-46fa-9c1a-ed738120921f","parentUid":"list-container","isContainer":true,"children":[]},{"type":"container","uid":"list-item","title":"List item","status":{"collapsed":false},"uuid":"45654c55-54c4-4711-ad25-42a22692fe99","parentUid":"list-container","isContainer":true,"children":[{"type":"container","uid":"link","title":"Link","status":{"collapsed":true},"uuid":"3f1d9439-eb53-45a1-b28c-fe73f1a22aae","parentUid":"list-item","isContainer":true,"children":[]}]},{"type":"container","uid":"list-item","title":"List item","status":{"collapsed":false},"uuid":"d4933375-b2cc-46db-9539-77ece9216fbd","parentUid":"list-container","isContainer":true,"children":[{"type":"container","uid":"link","title":"Link","status":{"collapsed":true},"uuid":"facaae62-6a39-4fbc-b890-6bc8ac7e1721","parentUid":"list-item","isContainer":true,"children":[]}]}]},{"type":"container","uid":"paragraph","title":"Paragraph","status":{"collapsed":true},"uuid":"5ced1e95-7b22-48fb-a38b-9d2bdb2c23e8","parentUid":"container","isContainer":true,"children":[]}]}],"componentForm":[{"type":"form-field","uid":"form-link","title":"Link","translate":true,"status":{"collapsed":false},"uuid":"42670858-4d72-4be5-ab5e-f2bb1b76d8e3","parentUid":"root","isContainer":false,"children":[]},{"type":"form-field","uid":"form-link","title":"Link","translate":true,"status":{"collapsed":false},"uuid":"faf48534-0172-40d2-a8c7-a3f1039042f7","parentUid":"root","isContainer":false,"children":[]},{"type":"form-field","uid":"form-link","title":"Link","translate":true,"status":{"collapsed":false},"uuid":"e9c36f66-fe88-48eb-a105-39f13c67231e","parentUid":"root","isContainer":false,"children":[]}],"mapper":{"9e7b8df1-1a07-441e-8077-015a8ea39a02":{"settings":{"formDefinition":[{"formKey":"container-settings","children":[{"formKey":"container-width","breakpoints":[],"activeFields":[{"name":"width","active":true}]},{"formKey":"common-link-animation","breakpoints":[{"name":"xs"}],"activeFields":[{"name":"linkAnimation","active":true},{"name":"animationType","active":true},{"name":"animationScope","active":true},{"name":"animationParent","active":true},{"name":"animationTarget","active":true},{"name":"animationScale","active":true},{"name":"animationDirection","active":true},{"name":"animationDirection","active":true},{"name":"animationDirection","active":true},{"name":"animationDistance","active":true},{"name":"animationPieces","active":true},{"name":"animationOrigin","active":true},{"name":"animationFoldHeight","active":true},{"name":"animationHorizontalFirst","active":true},{"name":"animationIterations","active":true},{"name":"animationEasing","active":true},{"name":"animationDuration","active":true}]},{"formKey":"common-link-modifier","breakpoints":[],"activeFields":[{"name":"modifier","active":true},{"name":"modifierType","active":true},{"name":"interactionScope","active":true},{"name":"interactionParent","active":true},{"name":"interactionTarget","active":true},{"name":"modifierName","active":true}]},{"formKey":"container-style","breakpoints":[],"activeFields":[{"name":"customStyle","active":true},{"name":"customStyle","active":true}]}]}],"selectorType":"topLevel","form":null,"items":[]},"styles":{"formDefinition":[{"formKey":"layout","children":[{"formKey":"padding","breakpoints":[{"name":"xs"}],"activeFields":[{"name":"padding-equal","active":false},{"name":"padding-top","active":false},{"name":"padding-bottom","active":false},{"name":"padding-left","active":true},{"name":"padding-right","active":true},{"name":"padding-block-start","active":false},{"name":"padding-block-end","active":false},{"name":"padding-inline-start","active":false},{"name":"padding-inline-end","active":false}]},{"formKey":"flex-item","breakpoints":[{"name":"md"}],"activeFields":[{"name":"flex-basis","active":true},{"name":"order","active":false},{"name":"flex-grow","active":false},{"name":"flex-shrink","active":false},{"name":"align-self","active":false},{"name":"align-self-safety","active":true}]}]}],"selectorType":"topLevel","items":[],"form":null}},"5ced1e95-7b22-48fb-a38b-9d2bdb2c23e8":{"settings":{"formDefinition":[{"formKey":"paragraph-settings","children":[{"formKey":"paragraph-paragraph","breakpoints":[],"activeFields":[{"name":"content","active":true}]},{"formKey":"paragraph-style","breakpoints":[],"activeFields":[{"name":"customStyle","active":true},{"name":"customStyle","active":true}]}]}],"selectorType":"topLevel","form":null,"items":[]},"styles":{"formDefinition":[{"formKey":"font","children":[{"formKey":"font-sizing-and-alignment","breakpoints":[{"name":"xs"}],"activeFields":[{"name":"font-size","active":true},{"name":"line-height","active":false},{"name":"text-align","active":false},{"name":"letter-spacing","active":false},{"name":"word-spacing","active":false},{"name":"text-indent","active":false}]},{"formKey":"font-and-color","breakpoints":[{"name":"xs"}],"activeFields":[{"name":"font-family","active":true},{"name":"font-weight","active":false},{"name":"color","active":true}]}]}],"selectorType":"topLevel","items":[],"form":null}},"46c9c2ff-d8e8-4d99-87c4-7f312c935189":{"settings":{"formDefinition":[{"formKey":"list-container-settings","children":[{"formKey":"list-container-type","breakpoints":[],"activeFields":[{"name":"element","active":true}]},{"formKey":"list-container-style","breakpoints":[],"activeFields":[{"name":"customStyle","active":true},{"name":"customStyle","active":true}]}]}],"selectorType":"topLevel","form":null,"items":[]},"styles":{"formDefinition":[{"formKey":"layout","children":[{"formKey":"display","breakpoints":[{"name":"xs"}],"activeFields":[{"name":"display","active":true},{"name":"visibility","active":false},{"name":"overflow","active":false},{"name":"overflow-x","active":false},{"name":"overflow-y","active":false}]},{"formKey":"margin","breakpoints":[{"name":"xs"}],"activeFields":[{"name":"margin-equal","active":false},{"name":"margin-top","active":false},{"name":"margin-bottom","active":true},{"name":"margin-left","active":false},{"name":"margin-right","active":false},{"name":"margin-block-start","active":false},{"name":"margin-block-end","active":false},{"name":"margin-inline-start","active":false},{"name":"margin-inline-end","active":false}]}]}],"selectorType":"topLevel","items":[],"form":null}},"d4933375-b2cc-46db-9539-77ece9216fbd":{"settings":{"formDefinition":[{"formKey":"list-item-settings","children":[{"formKey":"list-item-type","breakpoints":[],"activeFields":[{"name":"element","active":true}]},{"formKey":"list-item-style","breakpoints":[],"activeFields":[{"name":"customStyle","active":true},{"name":"customStyle","active":true}]}]}],"selectorType":"topLevel","form":null,"items":[]},"styles":{"formDefinition":[],"selectorType":"topLevel","items":[],"form":null}},"facaae62-6a39-4fbc-b890-6bc8ac7e1721":{"settings":{"formDefinition":[{"formKey":"link-settings","children":[{"formKey":"link-link","breakpoints":[],"activeFields":[{"name":"linkText","active":true},{"name":"titleAttribute","active":true},{"name":"type","active":true},{"name":"linkToPage","active":true},{"name":"url","active":true},{"name":"anchor","active":true},{"name":"scrollToSelector","active":true},{"name":"scrollToDuration","active":true},{"name":"scrollToOffsetType","active":true},{"name":"scrollToOffsetPx","active":true},{"name":"scrollToOffsetElement","active":true},{"name":"target","active":true},{"name":"helpText","active":true},{"name":"triggerId","active":true},{"name":"modalId","active":true}]},{"formKey":"link-modifier","breakpoints":[],"activeFields":[{"name":"modifier","active":true},{"name":"modifierType","active":true},{"name":"interactionScope","active":true},{"name":"interactionParent","active":true},{"name":"interactionTarget","active":true},{"name":"modifierName","active":true}]},{"formKey":"link-animation","breakpoints":[{"name":"xs"}],"activeFields":[{"name":"linkAnimation","active":true},{"name":"animationType","active":true},{"name":"animationScope","active":true},{"name":"animationParent","active":true},{"name":"animationTarget","active":true},{"name":"animationScale","active":true},{"name":"animationDirection","active":true},{"name":"animationDirection","active":true},{"name":"animationDirection","active":true},{"name":"animationDistance","active":true},{"name":"animationPieces","active":true},{"name":"animationOrigin","active":true},{"name":"animationFoldHeight","active":true},{"name":"animationHorizontalFirst","active":true},{"name":"animationIterations","active":true},{"name":"animationEasing","active":true},{"name":"animationDuration","active":true}]},{"formKey":"link-style","breakpoints":[],"activeFields":[{"name":"customStyle","active":true},{"name":"customStyle","active":true}]}]}],"selectorType":"topLevel","form":null,"items":[]}},"45654c55-54c4-4711-ad25-42a22692fe99":{"settings":{"formDefinition":[{"formKey":"list-item-settings","children":[{"formKey":"list-item-type","breakpoints":[],"activeFields":[{"name":"element","active":true}]},{"formKey":"list-item-style","breakpoints":[],"activeFields":[{"name":"customStyle","active":true},{"name":"customStyle","active":true}]}]}],"selectorType":"topLevel","form":null,"items":[]},"styles":{"formDefinition":[],"selectorType":"topLevel","items":[],"form":null}},"3f1d9439-eb53-45a1-b28c-fe73f1a22aae":{"settings":{"formDefinition":[{"formKey":"link-settings","children":[{"formKey":"link-link","breakpoints":[],"activeFields":[{"name":"linkText","active":true},{"name":"titleAttribute","active":true},{"name":"type","active":true},{"name":"linkToPage","active":true},{"name":"url","active":true},{"name":"anchor","active":true},{"name":"scrollToSelector","active":true},{"name":"scrollToDuration","active":true},{"name":"scrollToOffsetType","active":true},{"name":"scrollToOffsetPx","active":true},{"name":"scrollToOffsetElement","active":true},{"name":"target","active":true},{"name":"helpText","active":true},{"name":"triggerId","active":true},{"name":"modalId","active":true}]},{"formKey":"link-modifier","breakpoints":[],"activeFields":[{"name":"modifier","active":true},{"name":"modifierType","active":true},{"name":"interactionScope","active":true},{"name":"interactionParent","active":true},{"name":"interactionTarget","active":true},{"name":"modifierName","active":true}]},{"formKey":"link-animation","breakpoints":[{"name":"xs"}],"activeFields":[{"name":"linkAnimation","active":true},{"name":"animationType","active":true},{"name":"animationScope","active":true},{"name":"animationParent","active":true},{"name":"animationTarget","active":true},{"name":"animationScale","active":true},{"name":"animationDirection","active":true},{"name":"animationDirection","active":true},{"name":"animationDirection","active":true},{"name":"animationDistance","active":true},{"name":"animationPieces","active":true},{"name":"animationOrigin","active":true},{"name":"animationFoldHeight","active":true},{"name":"animationHorizontalFirst","active":true},{"name":"animationIterations","active":true},{"name":"animationEasing","active":true},{"name":"animationDuration","active":true}]},{"formKey":"link-style","breakpoints":[],"activeFields":[{"name":"customStyle","active":true},{"name":"customStyle","active":true}]}]}],"selectorType":"topLevel","form":null,"items":[]}},"placeholder-368c8430-585d-46fa-9c1a-ed738120921f":{"settings":{"formDefinition":[{"formKey":"paragraph-settings","children":[{"formKey":"paragraph-paragraph","breakpoints":[],"activeFields":[{"name":"content","active":true}]},{"formKey":"paragraph-style","breakpoints":[],"activeFields":[{"name":"customStyle","active":true},{"name":"customStyle","active":true}]}]}],"selectorType":"topLevel","form":null,"items":[]},"styles":{"formDefinition":[],"selectorType":"topLevel","items":[],"form":null}},"2b8f8f00-0bfe-474b-b63f-36ec3d8a13a8":{"settings":{"formDefinition":[{"formKey":"list-item-settings","children":[{"formKey":"list-item-type","breakpoints":[],"activeFields":[{"name":"element","active":true}]},{"formKey":"list-item-style","breakpoints":[],"activeFields":[{"name":"customStyle","active":true},{"name":"customStyle","active":true}]}]}],"selectorType":"topLevel","form":null,"items":[]},"styles":{"formDefinition":[],"selectorType":"topLevel","items":[],"form":null}},"96975e61-ae73-4c5a-933a-3f28c77163f9":{"settings":{"formDefinition":[{"formKey":"link-settings","children":[{"formKey":"link-link","breakpoints":[],"activeFields":[{"name":"linkText","active":true},{"name":"titleAttribute","active":true},{"name":"type","active":true},{"name":"linkToPage","active":true},{"name":"url","active":true},{"name":"anchor","active":true},{"name":"scrollToSelector","active":true},{"name":"scrollToDuration","active":true},{"name":"scrollToOffsetType","active":true},{"name":"scrollToOffsetPx","active":true},{"name":"scrollToOffsetElement","active":true},{"name":"target","active":true},{"name":"helpText","active":true},{"name":"triggerId","active":true},{"name":"modalId","active":true}]},{"formKey":"link-modifier","breakpoints":[],"activeFields":[{"name":"modifier","active":true},{"name":"modifierType","active":true},{"name":"interactionScope","active":true},{"name":"interactionParent","active":true},{"name":"interactionTarget","active":true},{"name":"modifierName","active":true}]},{"formKey":"link-animation","breakpoints":[{"name":"xs"}],"activeFields":[{"name":"linkAnimation","active":true},{"name":"animationType","active":true},{"name":"animationScope","active":true},{"name":"animationParent","active":true},{"name":"animationTarget","active":true},{"name":"animationScale","active":true},{"name":"animationDirection","active":true},{"name":"animationDirection","active":true},{"name":"animationDirection","active":true},{"name":"animationDistance","active":true},{"name":"animationPieces","active":true},{"name":"animationOrigin","active":true},{"name":"animationFoldHeight","active":true},{"name":"animationHorizontalFirst","active":true},{"name":"animationIterations","active":true},{"name":"animationEasing","active":true},{"name":"animationDuration","active":true}]},{"formKey":"link-style","breakpoints":[],"activeFields":[{"name":"customStyle","active":true},{"name":"customStyle","active":true}]}]}],"selectorType":"topLevel","form":null,"items":[]},"styles":{"formDefinition":[],"selectorType":"topLevel","items":[],"form":null}},"15f03e0e-f352-45b2-92b9-82acb2dd17f7":{"settings":{"formDefinition":[{"formKey":"paragraph-settings","children":[{"formKey":"paragraph-paragraph","breakpoints":[],"activeFields":[{"name":"content","active":true}]},{"formKey":"paragraph-style","breakpoints":[],"activeFields":[{"name":"customStyle","active":true},{"name":"customStyle","active":true}]}]}],"selectorType":"topLevel","form":null,"items":[]},"styles":{"formDefinition":[{"formKey":"font","children":[{"formKey":"font-and-color","breakpoints":[{"name":"xs"}],"activeFields":[{"name":"font-family","active":true},{"name":"font-weight","active":false},{"name":"color","active":true}]},{"formKey":"font-sizing-and-alignment","breakpoints":[{"name":"xs"},{"name":"sm"},{"name":"lg"},{"name":"xl"}],"activeFields":[{"name":"font-size","active":true},{"name":"line-height","active":false},{"name":"text-align","active":false},{"name":"letter-spacing","active":false},{"name":"word-spacing","active":false},{"name":"text-indent","active":false}]}]},{"formKey":"layout","children":[{"formKey":"margin","breakpoints":[{"name":"xs"}],"activeFields":[{"name":"margin-equal","active":false},{"name":"margin-top","active":false},{"name":"margin-bottom","active":true},{"name":"margin-left","active":false},{"name":"margin-right","active":false},{"name":"margin-block-start","active":false},{"name":"margin-block-end","active":false},{"name":"margin-inline-start","active":false},{"name":"margin-inline-end","active":false}]}]}],"selectorType":"topLevel","items":[],"form":null}},"c6646f02-36c4-49c7-8f27-69dd2c49a7e8":{"settings":{"formDefinition":[{"formKey":"container-settings","children":[{"formKey":"container-width","breakpoints":[],"activeFields":[{"name":"width","active":true}]},{"formKey":"common-link-animation","breakpoints":[{"name":"xs"}],"activeFields":[{"name":"linkAnimation","active":true},{"name":"animationType","active":true},{"name":"animationScope","active":true},{"name":"animationParent","active":true},{"name":"animationTarget","active":true},{"name":"animationScale","active":true},{"name":"animationDirection","active":true},{"name":"animationDirection","active":true},{"name":"animationDirection","active":true},{"name":"animationDistance","active":true},{"name":"animationPieces","active":true},{"name":"animationOrigin","active":true},{"name":"animationFoldHeight","active":true},{"name":"animationHorizontalFirst","active":true},{"name":"animationIterations","active":true},{"name":"animationEasing","active":true},{"name":"animationDuration","active":true}]},{"formKey":"common-link-modifier","breakpoints":[],"activeFields":[{"name":"modifier","active":true},{"name":"modifierType","active":true},{"name":"interactionScope","active":true},{"name":"interactionParent","active":true},{"name":"interactionTarget","active":true},{"name":"modifierName","active":true}]},{"formKey":"container-style","breakpoints":[],"activeFields":[{"name":"customStyle","active":true},{"name":"customStyle","active":true}]}]}],"selectorType":"topLevel","form":null,"items":[]},"styles":{"formDefinition":[{"formKey":"layout","children":[{"formKey":"height","breakpoints":[{"name":"xs"}],"activeFields":[{"name":"min-height","active":false},{"name":"max-height","active":false},{"name":"height","active":true}]},{"formKey":"width","breakpoints":[{"name":"xs"}],"activeFields":[{"name":"min-width","active":false},{"name":"max-width","active":false},{"name":"width","active":true}]},{"formKey":"margin","breakpoints":[{"name":"md"}],"activeFields":[{"name":"margin-equal","active":false},{"name":"margin-top","active":true},{"name":"margin-bottom","active":false},{"name":"margin-left","active":false},{"name":"margin-right","active":false},{"name":"margin-block-start","active":false},{"name":"margin-block-end","active":false},{"name":"margin-inline-start","active":false},{"name":"margin-inline-end","active":false}]}]},{"formKey":"custom-css","children":[{"formKey":"css-property-and-css-value","breakpoints":[{"name":"xs"}],"activeFields":[{"name":"custom-css","active":true},{"name":"customCssProperty","active":true},{"name":"customCss","active":true},{"name":"customCssProperty","active":true},{"name":"customCss","active":true},{"name":"customCssProperty","active":true},{"name":"customCss","active":true},{"name":"customCssProperty","active":true},{"name":"customCss","active":true}]}]}],"selectorType":"topLevel","items":[],"form":null}}},"model":{"9e7b8df1-1a07-441e-8077-015a8ea39a02":{"settings":{"title":"Container","width":"fluid","customStyle":[{"customStyle":""}],"settings":{"width":"fluid","customStyle":[{"customStyle":""}]}},"context-visibility":{"contextVisibility":{"condition":"ALL"}},"styles":{"settings":{"element":"container"},"styles":{"xs":{"padding":{"padding-left":{"value":"15"},"padding-right":{"value":"15"}}},"md":{"flex-item":{"flex-basis":{"value":"16.67%"}}}}}},"c6646f02-36c4-49c7-8f27-69dd2c49a7e8":{"settings":{"title":"Logo","width":"fluid","customStyle":[{"customStyle":""}],"settings":{"width":"fluid","customStyle":[{"customStyle":""}]}},"context-visibility":{"contextVisibility":{"condition":"ALL"}},"styles":{"settings":{"element":"container"},"styles":{"xs":{"height":{"value":"60"},"width":{"value":"160"},"custom-css":[{"customCssProperty":{"value":"background-image"},"customCss":{"value":"url(\"/solutions/modules/custom/costar_assets/logos/loop_rev_svg.svg\")"}},{"customCssProperty":{"value":"background-size"},"customCss":{"value":"100% 120%"}},{"customCssProperty":{"value":"background-position"},"customCss":{"value":"bottom right"}},{"customCssProperty":{"value":"background-repeat"},"customCss":{"value":"no-repeat"}}]},"md":{"margin":{"margin-top":{"value":"-16"}}}}}},"15f03e0e-f352-45b2-92b9-82acb2dd17f7":{"settings":{"title":"Connect with us","customStyle":[{"customStyle":""}],"settings":{"customStyle":[{"customStyle":""}]},"content":"Connect with us"},"context-visibility":{"contextVisibility":{"condition":"ALL"}},"styles":{"settings":{"element":"p"},"styles":{"xs":{"color":{"value":{"name":"White","uid":"white","value":{"hex":"#ffffff","rgba":"rgba(255, 255, 255, 1)"},"wysiwyg":true,"class":".coh-color-white","variable":"$coh-color-white","inuse":true,"link":true}},"font-size":{"value":"15"},"font-family":{"value":"$coh-font-costar-brown"},"margin":{"margin-bottom":{"value":"6"}}},"sm":{"font-size":{"value":"16"}},"lg":{"font-size":{"value":"18"}},"xl":{"font-size":{"value":"20"}}}}},"46c9c2ff-d8e8-4d99-87c4-7f312c935189":{"settings":{"title":"Social links container","element":"ul","customStyle":[{"customStyle":""}],"settings":{"element":"ul","customStyle":[{"customStyle":""}]}},"context-visibility":{"contextVisibility":{"condition":"ALL"}},"styles":{"settings":{"element":"list-container"},"styles":{"xs":{"display":{"value":"flex"},"margin":{"margin-bottom":{"value":"18px"}}}}}},"2b8f8f00-0bfe-474b-b63f-36ec3d8a13a8":{"settings":{"title":"List item - facebook","element":"li","customStyle":[{"customStyle":"coh-style-social-icon--facebook"}],"settings":{"element":"li","customStyle":[{"customStyle":""}]}},"context-visibility":{"contextVisibility":{"condition":"ALL"}},"styles":{"settings":{"element":"list-item"}}},"96975e61-ae73-4c5a-933a-3f28c77163f9":{"settings":{"title":"Facebook Link","customStyle":[{"customStyle":""}],"settings":{"type":"internal-page","target":"_self","customStyle":[{"customStyle":""}]},"type":"url","target":"_blank","linkText":"","url":"[field.42670858-4d72-4be5-ab5e-f2bb1b76d8e3]"},"context-visibility":{"contextVisibility":{"condition":"ALL"}},"styles":{"settings":{"element":"link"}}},"placeholder-368c8430-585d-46fa-9c1a-ed738120921f":{"settings":{"title":"Paragraph","customStyle":[{"customStyle":""}],"settings":{"customStyle":[{"customStyle":""}]}},"context-visibility":{"contextVisibility":{"condition":"ALL"}},"styles":{"settings":{"element":"p"}}},"45654c55-54c4-4711-ad25-42a22692fe99":{"settings":{"title":"List item - linkedin","element":"li","customStyle":[{"customStyle":"coh-style-social-icon--linkedin"}],"settings":{"element":"li","customStyle":[{"customStyle":""}]}},"context-visibility":{"contextVisibility":{"condition":"ALL"}},"styles":{"settings":{"element":"list-item"}}},"3f1d9439-eb53-45a1-b28c-fe73f1a22aae":{"settings":{"title":"Linkedin Link","customStyle":[{"customStyle":""}],"settings":{"type":"internal-page","target":"_self","customStyle":[{"customStyle":""}]},"type":"url","target":"_blank","linkText":"","url":"[field.faf48534-0172-40d2-a8c7-a3f1039042f7]"},"context-visibility":{"contextVisibility":{"condition":"ALL"}},"styles":{"settings":{"element":"link"}}},"d4933375-b2cc-46db-9539-77ece9216fbd":{"settings":{"title":"List item - twitter","element":"li","customStyle":[{"customStyle":"coh-style-social-icon--twitter"}],"settings":{"element":"li","customStyle":[{"customStyle":""}]}},"context-visibility":{"contextVisibility":{"condition":"ALL"}},"styles":{"settings":{"element":"list-item"}}},"facaae62-6a39-4fbc-b890-6bc8ac7e1721":{"settings":{"title":"Twitter Link","customStyle":[{"customStyle":""}],"settings":{"type":"internal-page","target":"_self","customStyle":[{"customStyle":""}]},"type":"url","target":"_blank","linkText":"","url":"[field.e9c36f66-fe88-48eb-a105-39f13c67231e]"},"context-visibility":{"contextVisibility":{"condition":"ALL"}},"styles":{"settings":{"element":"link"}}},"5ced1e95-7b22-48fb-a38b-9d2bdb2c23e8":{"settings":{"title":"Copyright Text","customStyle":[{"customStyle":""}],"settings":{"customStyle":[{"customStyle":""}]},"content":"Â©[current-date:html_year] CoStar Group, Inc."},"context-visibility":{"contextVisibility":{"condition":"ALL"}},"styles":{"settings":{"element":"p"},"styles":{"xs":{"font-size":{"value":"13"},"color":{"value":{"link":true,"value":{"hex":"#b1b3b0","rgba":"rgba(177, 179, 176, 1)"},"name":"Gray","uid":"gray","class":".coh-color-gray","variable":"$coh-color-gray","inuse":true,"wysiwyg":true}},"font-family":{"value":"$coh-font-costar-brown"}}}}},"42670858-4d72-4be5-ab5e-f2bb1b76d8e3":{"settings":{"title":"Facebook Link","isStyle":true,"type":"cohTypeahead","key":"linkToPage","placeholder":"Type page name","labelProperty":"name","valueProperty":"id","typeaheadEditable":true,"endpoint":"/cohesionapi/link-autocomplete?q=","schema":{"type":"string"},"machineName":"facebook-link","entityTypes":{"component_content":false,"node":false,"content_moderation_state":false,"block_content":false,"menu_link_content":false,"file":false,"cohesion_layout":false,"media":false,"redirect":false,"taxonomy_term":false,"path_alias":false,"user":false,"view":false},"tooltipPlacement":"auto right"},"contextVisibility":{"condition":"ALL"}},"faf48534-0172-40d2-a8c7-a3f1039042f7":{"settings":{"title":"Linkedin Link","isStyle":true,"type":"cohTypeahead","key":"linkToPage","placeholder":"Type page name","labelProperty":"name","valueProperty":"id","typeaheadEditable":true,"endpoint":"/cohesionapi/link-autocomplete?q=","schema":{"type":"string"},"machineName":"linkedin-link","entityTypes":{"component_content":false,"node":false,"content_moderation_state":false,"block_content":false,"menu_link_content":false,"file":false,"cohesion_layout":false,"media":false,"redirect":false,"taxonomy_term":false,"path_alias":false,"user":false,"view":false},"tooltipPlacement":"auto right"},"contextVisibility":{"condition":"ALL"}},"e9c36f66-fe88-48eb-a105-39f13c67231e":{"settings":{"title":"Twitter Link","isStyle":true,"type":"cohTypeahead","key":"linkToPage","placeholder":"Type page name","labelProperty":"name","valueProperty":"id","typeaheadEditable":true,"endpoint":"/cohesionapi/link-autocomplete?q=","schema":{"type":"string"},"machineName":"twitter-link","entityTypes":{"component_content":false,"node":false,"content_moderation_state":false,"block_content":false,"menu_link_content":false,"file":false,"cohesion_layout":false,"media":false,"redirect":false,"taxonomy_term":false,"path_alias":false,"user":false,"view":false},"tooltipPlacement":"auto right"},"contextVisibility":{"condition":"ALL"}}},"previewModel":{"42670858-4d72-4be5-ab5e-f2bb1b76d8e3":{},"96975e61-ae73-4c5a-933a-3f28c77163f9":{"settings":{"url":""}},"3f1d9439-eb53-45a1-b28c-fe73f1a22aae":{"settings":{}},"facaae62-6a39-4fbc-b890-6bc8ac7e1721":{},"faf48534-0172-40d2-a8c7-a3f1039042f7":{},"e9c36f66-fe88-48eb-a105-39f13c67231e":{},"2b8f8f00-0bfe-474b-b63f-36ec3d8a13a8":{},"45654c55-54c4-4711-ad25-42a22692fe99":{},"d4933375-b2cc-46db-9539-77ece9216fbd":{},"15f03e0e-f352-45b2-92b9-82acb2dd17f7":{},"5ced1e95-7b22-48fb-a38b-9d2bdb2c23e8":{},"46c9c2ff-d8e8-4d99-87c4-7f312c935189":{},"9e7b8df1-1a07-441e-8077-015a8ea39a02":{},"c6646f02-36c4-49c7-8f27-69dd2c49a7e8":{},"placeholder-368c8430-585d-46fa-9c1a-ed738120921f":{}},"variableFields":{"42670858-4d72-4be5-ab5e-f2bb1b76d8e3":[],"96975e61-ae73-4c5a-933a-3f28c77163f9":["settings.url"],"3f1d9439-eb53-45a1-b28c-fe73f1a22aae":["settings.url"],"facaae62-6a39-4fbc-b890-6bc8ac7e1721":["settings.url"],"faf48534-0172-40d2-a8c7-a3f1039042f7":[],"e9c36f66-fe88-48eb-a105-39f13c67231e":[],"2b8f8f00-0bfe-474b-b63f-36ec3d8a13a8":[],"45654c55-54c4-4711-ad25-42a22692fe99":[],"d4933375-b2cc-46db-9539-77ece9216fbd":[],"15f03e0e-f352-45b2-92b9-82acb2dd17f7":[],"5ced1e95-7b22-48fb-a38b-9d2bdb2c23e8":[],"46c9c2ff-d8e8-4d99-87c4-7f312c935189":[],"9e7b8df1-1a07-441e-8077-015a8ea39a02":[],"c6646f02-36c4-49c7-8f27-69dd2c49a7e8":[],"placeholder-368c8430-585d-46fa-9c1a-ed738120921f":[]},"meta":{"fieldHistory":[{"uuid":"e9c36f66-fe88-48eb-a105-39f13c67231e","type":"form-link","machineName":"twitter-link"},{"uuid":"faf48534-0172-40d2-a8c7-a3f1039042f7","type":"form-link","machineName":"linkedin-link"},{"uuid":"42670858-4d72-4be5-ab5e-f2bb1b76d8e3","type":"form-link","machineName":"facebook-link"},{"uuid":"319ef225-691c-4539-a975-4d2d3e214606","type":"form-entity-browser","machineName":"logo"}]}}';

  /**
   * Style guide manager json_value.
   *
   * @var string
   */
  private $fixture_sgm = '{"model":{"62643d5c-045f-45a3-968e-7772020d579d":{"settings":{"title":"Input","schema":{"type":"string"},"machineName":"input","tooltipPlacement":"auto right"},"contextVisibility":{"condition":"ALL"}}},"mapper":{},"previewModel":{"62643d5c-045f-45a3-968e-7772020d579d":{}},"variableFields":{"62643d5c-045f-45a3-968e-7772020d579d":[]},"meta":{"fieldHistory":[{"uuid":"62643d5c-045f-45a3-968e-7772020d579d","type":"form-input","machineName":"input"}]},"styleGuideForm":[{"type":"form-field","uid":"form-input","title":"Input","translate":true,"status":{"collapsed":false},"parentUid":"root","uuid":"62643d5c-045f-45a3-968e-7772020d579d","isContainer":false}]}';
  /**
   * {@inheritdoc}
   */
  public function setUp():void {
    $this->unit = new _0034EntityUpdate([], NULL, NULL);
  }

  /**
   * @covers \Drupal\cohesion\Plugin\EntityUpdate\_0034EntityUpdate::runUpdate
   */
  public function testRunUpdate() {

    // Test a Layout Canvas.
    $layoutCanvas = new _0034MockUpdateEntity($this->fixture_layout_canvas, TRUE);
    $this->assertionsLayoutCanvasBefore($layoutCanvas->getDecodedJsonValues());
    $this->unit->runUpdate($layoutCanvas);
    $this->assertionsLayoutCanvasAfter($layoutCanvas->getDecodedJsonValues());

    // Test a Component form.
    $componentLayoutCanvas = new _0034MockUpdateEntity($this->fixture_component, TRUE);
    $this->assertionsComponentLayoutCanvasBefore($componentLayoutCanvas->getDecodedJsonValues());
    $this->unit->runUpdate($componentLayoutCanvas);
    $this->assertionsComponentLayoutCanvasAfter($componentLayoutCanvas->getDecodedJsonValues());

    // Test a Style guide form.
    $styleGuideLayoutCanvas = new _0034MockUpdateEntity($this->fixture_sgm, TRUE);
    $this->assertionsStyleGuideLayoutCanvasBefore($styleGuideLayoutCanvas->getDecodedJsonValues());
    $this->unit->runUpdate($styleGuideLayoutCanvas);
    $this->assertionsStyleGuideLayoutCanvasAfter($styleGuideLayoutCanvas->getDecodedJsonValues());
  }

  private function assertionsLayoutCanvasBefore($layout_array_before) {
    $this->assertEquals(0, $layout_array_before['canvas'][0]['isContainer']);
  }

  private function assertionsLayoutCanvasAfter($layout_array_after) {
    $this->assertArrayNotHasKey('isContainer', $layout_array_after['canvas'][0]);
  }

  private function assertionsComponentLayoutCanvasBefore($layout_array_before) {
    $this->assertEquals(true, $layout_array_before['canvas'][0]['isContainer']);
    $this->assertEquals(true, $layout_array_before['canvas'][0]['children'][0]['isContainer']);
    $this->assertEquals(false, $layout_array_before['componentForm'][0]['isContainer']);
}

  private function assertionsComponentLayoutCanvasAfter($layout_array_after) {
    $this->assertArrayNotHasKey('isContainer', $layout_array_after['canvas'][0]);
    $this->assertArrayNotHasKey('isContainer', $layout_array_after['canvas'][0]['children'][0]);
    $this->assertArrayNotHasKey('isContainer', $layout_array_after['componentForm'][0]);
  }

  private function assertionsStyleGuideLayoutCanvasBefore($layout_array_before) {
    $this->assertEquals(false, $layout_array_before['styleGuideForm'][0]['isContainer']);
  }

  private function assertionsStyleGuideLayoutCanvasAfter($layout_array_after) {
    $this->assertArrayNotHasKey('isContainer', $layout_array_after['styleGuideForm'][0]);
  }
}
